(()=>{var es=Object.defineProperty;var Ze=(t,e)=>{for(var n in e)es(t,n,{get:e[n],enumerable:!0})};var Dr=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var j=(t,e,n)=>(Dr(t,e,"read from private field"),n?n.call(t):e.get(t)),ue=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},ce=(t,e,n,r)=>(Dr(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);var jn=(()=>{let{Deno:t}=globalThis;if(typeof t?.build?.os=="string")return t.build.os;let{navigator:e}=globalThis;return e?.appVersion?.includes?.("Win")?"windows":"linux"})(),le=jn==="windows";var Lt={};Ze(Lt,{basename:()=>ms,delimiter:()=>ls,dirname:()=>ds,extname:()=>gs,format:()=>fs,fromFileUrl:()=>ys,isAbsolute:()=>Ir,join:()=>ps,normalize:()=>_r,parse:()=>hs,relative:()=>us,resolve:()=>an,sep:()=>as,toFileUrl:()=>Ts,toNamespacedPath:()=>cs});function L(t){if(typeof t!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function V(t){return t===47}function O(t){return V(t)||t===92}function be(t){return t>=97&&t<=122||t>=65&&t<=90}function Je(t,e,n,r){let i="",s=0,a=-1,o=0,l;for(let p=0,u=t.length;p<=u;++p){if(p<u)l=t.charCodeAt(p);else{if(r(l))break;l=47}if(r(l)){if(!(a===p-1||o===1))if(a!==p-1&&o===2){if(i.length<2||s!==2||i.charCodeAt(i.length-1)!==46||i.charCodeAt(i.length-2)!==46){if(i.length>2){let c=i.lastIndexOf(n);c===-1?(i="",s=0):(i=i.slice(0,c),s=i.length-1-i.lastIndexOf(n)),a=p,o=0;continue}else if(i.length===2||i.length===1){i="",s=0,a=p,o=0;continue}}e&&(i.length>0?i+=`${n}..`:i="..",s=2)}else i.length>0?i+=n+t.slice(a+1,p):i=t.slice(a+1,p),s=p-a-1;a=p,o=0}else l===46&&o!==-1?++o:o=-1}return i}function nn(t,e){let n=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||"");return n?r===t?n:n===e.root?n+r:n+t+r:r}var ss={"	":"%09","\n":"%0A","\v":"%0B","\f":"%0C","\r":"%0D"," ":"%20"};function rn(t){return t.replaceAll(/[\s]/g,e=>ss[e]??e)}function sn(t,e,n=0){let r=!1,i=t.length;for(let s=t.length-1;s>=n;--s)if(e(t.charCodeAt(s))){if(r){n=s+1;break}}else r||(r=!0,i=s+1);return t.slice(n,i)}function _e(t,e){if(t.length<=1)return t;let n=t.length;for(let r=t.length-1;r>0&&e(t.charCodeAt(r));r--)n=r;return t.slice(0,n)}function on(t,e){if(e.length>=t.length)return t;let n=t.length-e.length;for(let r=e.length-1;r>=0;--r)if(t.charCodeAt(n+r)!==e.charCodeAt(r))return t;return t.slice(0,-e.length)}var Un=class extends Error{constructor(e){super(e),this.name="DenoStdInternalError"}};function Ie(t,e=""){if(!t)throw new Un(e)}var as="\\",ls=";";function an(...t){let e="",n="",r=!1;for(let i=t.length-1;i>=-1;i--){let s,{Deno:a}=globalThis;if(i>=0)s=t[i];else if(e){if(typeof a?.env?.get!="function"||typeof a?.cwd!="function")throw new TypeError("Resolved a relative path without a CWD.");s=a.cwd(),(s===void 0||s.slice(0,3).toLowerCase()!==`${e.toLowerCase()}\\`)&&(s=`${e}\\`)}else{if(typeof a?.cwd!="function")throw new TypeError("Resolved a drive-letter-less path without a CWD.");s=a.cwd()}L(s);let o=s.length;if(o===0)continue;let l=0,p="",u=!1,c=s.charCodeAt(0);if(o>1)if(O(c))if(u=!0,O(s.charCodeAt(1))){let d=2,f=d;for(;d<o&&!O(s.charCodeAt(d));++d);if(d<o&&d!==f){let m=s.slice(f,d);for(f=d;d<o&&O(s.charCodeAt(d));++d);if(d<o&&d!==f){for(f=d;d<o&&!O(s.charCodeAt(d));++d);d===o?(p=`\\\\${m}\\${s.slice(f)}`,l=d):d!==f&&(p=`\\\\${m}\\${s.slice(f,d)}`,l=d)}}}else l=1;else be(c)&&s.charCodeAt(1)===58&&(p=s.slice(0,2),l=2,o>2&&O(s.charCodeAt(2))&&(u=!0,l=3));else O(c)&&(l=1,u=!0);if(!(p.length>0&&e.length>0&&p.toLowerCase()!==e.toLowerCase())&&(e.length===0&&p.length>0&&(e=p),r||(n=`${s.slice(l)}\\${n}`,r=u),r&&e.length>0))break}return n=Je(n,!r,"\\",O),e+(r?"\\":"")+n||"."}function _r(t){L(t);let e=t.length;if(e===0)return".";let n=0,r,i=!1,s=t.charCodeAt(0);if(e>1)if(O(s))if(i=!0,O(t.charCodeAt(1))){let o=2,l=o;for(;o<e&&!O(t.charCodeAt(o));++o);if(o<e&&o!==l){let p=t.slice(l,o);for(l=o;o<e&&O(t.charCodeAt(o));++o);if(o<e&&o!==l){for(l=o;o<e&&!O(t.charCodeAt(o));++o);if(o===e)return`\\\\${p}\\${t.slice(l)}\\`;o!==l&&(r=`\\\\${p}\\${t.slice(l,o)}`,n=o)}}}else n=1;else be(s)&&t.charCodeAt(1)===58&&(r=t.slice(0,2),n=2,e>2&&O(t.charCodeAt(2))&&(i=!0,n=3));else if(O(s))return"\\";let a;return n<e?a=Je(t.slice(n),!i,"\\",O):a="",a.length===0&&!i&&(a="."),a.length>0&&O(t.charCodeAt(e-1))&&(a+="\\"),r===void 0?i?a.length>0?`\\${a}`:"\\":a.length>0?a:"":i?a.length>0?`${r}\\${a}`:`${r}\\`:a.length>0?r+a:r}function Ir(t){L(t);let e=t.length;if(e===0)return!1;let n=t.charCodeAt(0);return O(n)?!0:!!(be(n)&&e>2&&t.charCodeAt(1)===58&&O(t.charCodeAt(2)))}function ps(...t){let e=t.length;if(e===0)return".";let n,r=null;for(let a=0;a<e;++a){let o=t[a];L(o),o.length>0&&(n===void 0?n=r=o:n+=`\\${o}`)}if(n===void 0)return".";let i=!0,s=0;if(Ie(r!=null),O(r.charCodeAt(0))){++s;let a=r.length;a>1&&O(r.charCodeAt(1))&&(++s,a>2&&(O(r.charCodeAt(2))?++s:i=!1))}if(i){for(;s<n.length&&O(n.charCodeAt(s));++s);s>=2&&(n=`\\${n.slice(s)}`)}return _r(n)}function us(t,e){if(L(t),L(e),t===e)return"";let n=an(t),r=an(e);if(n===r||(t=n.toLowerCase(),e=r.toLowerCase(),t===e))return"";let i=0,s=t.length;for(;i<s&&t.charCodeAt(i)===92;++i);for(;s-1>i&&t.charCodeAt(s-1)===92;--s);let a=s-i,o=0,l=e.length;for(;o<l&&e.charCodeAt(o)===92;++o);for(;l-1>o&&e.charCodeAt(l-1)===92;--l);let p=l-o,u=a<p?a:p,c=-1,d=0;for(;d<=u;++d){if(d===u){if(p>u){if(e.charCodeAt(o+d)===92)return r.slice(o+d+1);if(d===2)return r.slice(o+d)}a>u&&(t.charCodeAt(i+d)===92?c=d:d===2&&(c=3));break}let m=t.charCodeAt(i+d),g=e.charCodeAt(o+d);if(m!==g)break;m===92&&(c=d)}if(d!==u&&c===-1)return r;let f="";for(c===-1&&(c=0),d=i+c+1;d<=s;++d)(d===s||t.charCodeAt(d)===92)&&(f.length===0?f+="..":f+="\\..");return f.length>0?f+r.slice(o+c,l):(o+=c,r.charCodeAt(o)===92&&++o,r.slice(o,l))}function cs(t){if(typeof t!="string")return t;if(t.length===0)return"";let e=an(t);if(e.length>=3){if(e.charCodeAt(0)===92){if(e.charCodeAt(1)===92){let n=e.charCodeAt(2);if(n!==63&&n!==46)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(be(e.charCodeAt(0))&&e.charCodeAt(1)===58&&e.charCodeAt(2)===92)return`\\\\?\\${e}`}return t}function ds(t){L(t);let e=t.length;if(e===0)return".";let n=-1,r=-1,i=!0,s=0,a=t.charCodeAt(0);if(e>1)if(O(a)){if(n=s=1,O(t.charCodeAt(1))){let o=2,l=o;for(;o<e&&!O(t.charCodeAt(o));++o);if(o<e&&o!==l){for(l=o;o<e&&O(t.charCodeAt(o));++o);if(o<e&&o!==l){for(l=o;o<e&&!O(t.charCodeAt(o));++o);if(o===e)return t;o!==l&&(n=s=o+1)}}}}else be(a)&&t.charCodeAt(1)===58&&(n=s=2,e>2&&O(t.charCodeAt(2))&&(n=s=3));else if(O(a))return t;for(let o=e-1;o>=s;--o)if(O(t.charCodeAt(o))){if(!i){r=o;break}}else i=!1;if(r===-1){if(n===-1)return".";r=n}return _e(t.slice(0,r),V)}function ms(t,e=""){if(L(t),t.length===0)return t;if(typeof e!="string")throw new TypeError(`Suffix must be a string. Received ${JSON.stringify(e)}`);let n=0;if(t.length>=2){let s=t.charCodeAt(0);be(s)&&t.charCodeAt(1)===58&&(n=2)}let r=sn(t,O,n),i=_e(r,O);return e?on(i,e):i}function gs(t){L(t);let e=0,n=-1,r=0,i=-1,s=!0,a=0;t.length>=2&&t.charCodeAt(1)===58&&be(t.charCodeAt(0))&&(e=r=2);for(let o=t.length-1;o>=e;--o){let l=t.charCodeAt(o);if(O(l)){if(!s){r=o+1;break}continue}i===-1&&(s=!1,i=o+1),l===46?n===-1?n=o:a!==1&&(a=1):n!==-1&&(a=-1)}return n===-1||i===-1||a===0||a===1&&n===i-1&&n===r+1?"":t.slice(n,i)}function fs(t){if(t===null||typeof t!="object")throw new TypeError(`The "pathObject" argument must be of type Object. Received type ${typeof t}`);return nn("\\",t)}function hs(t){L(t);let e={root:"",dir:"",base:"",ext:"",name:""},n=t.length;if(n===0)return e;let r=0,i=t.charCodeAt(0);if(n>1){if(O(i)){if(r=1,O(t.charCodeAt(1))){let c=2,d=c;for(;c<n&&!O(t.charCodeAt(c));++c);if(c<n&&c!==d){for(d=c;c<n&&O(t.charCodeAt(c));++c);if(c<n&&c!==d){for(d=c;c<n&&!O(t.charCodeAt(c));++c);c===n?r=c:c!==d&&(r=c+1)}}}}else if(be(i)&&t.charCodeAt(1)===58)if(r=2,n>2){if(O(t.charCodeAt(2))){if(n===3)return e.root=e.dir=t,e.base="\\",e;r=3}}else return e.root=e.dir=t,e}else if(O(i))return e.root=e.dir=t,e.base="\\",e;r>0&&(e.root=t.slice(0,r));let s=-1,a=r,o=-1,l=!0,p=t.length-1,u=0;for(;p>=r;--p){if(i=t.charCodeAt(p),O(i)){if(!l){a=p+1;break}continue}o===-1&&(l=!1,o=p+1),i===46?s===-1?s=p:u!==1&&(u=1):s!==-1&&(u=-1)}return s===-1||o===-1||u===0||u===1&&s===o-1&&s===a+1?o!==-1&&(e.base=e.name=t.slice(a,o)):(e.name=t.slice(a,s),e.base=t.slice(a,o),e.ext=t.slice(s,o)),e.base=e.base||"\\",a>0&&a!==r?e.dir=t.slice(0,a-1):e.dir=e.root,e}function ys(t){if(t=t instanceof URL?t:new URL(t),t.protocol!="file:")throw new TypeError("Must be a file URL.");let e=decodeURIComponent(t.pathname.replace(/\//g,"\\").replace(/%(?![0-9A-Fa-f]{2})/g,"%25")).replace(/^\\*([A-Za-z]:)(\\|$)/,"$1\\");return t.hostname!=""&&(e=`\\\\${t.hostname}${e}`),e}function Ts(t){if(!Ir(t))throw new TypeError("Must be an absolute path.");let[,e,n]=t.match(/^(?:[/\\]{2}([^/\\]+)(?=[/\\](?:[^/\\]|$)))?(.*)/),r=new URL("file:///");if(r.pathname=rn(n.replace(/%/g,"%25")),e!=null&&e!="localhost"&&(r.hostname=e,!r.hostname))throw new TypeError("Invalid hostname.");return r}var _t={};Ze(_t,{basename:()=>Rs,delimiter:()=>xs,dirname:()=>As,extname:()=>Ps,format:()=>vs,fromFileUrl:()=>$s,isAbsolute:()=>Mr,join:()=>Cs,normalize:()=>Fr,parse:()=>Ss,relative:()=>Os,resolve:()=>Bn,sep:()=>bs,toFileUrl:()=>Es,toNamespacedPath:()=>ws});var bs="/",xs=":";function Bn(...t){let e="",n=!1;for(let r=t.length-1;r>=-1&&!n;r--){let i;if(r>=0)i=t[r];else{let{Deno:s}=globalThis;if(typeof s?.cwd!="function")throw new TypeError("Resolved a relative path without a CWD.");i=s.cwd()}L(i),i.length!==0&&(e=`${i}/${e}`,n=V(i.charCodeAt(0)))}return e=Je(e,!n,"/",V),n?e.length>0?`/${e}`:"/":e.length>0?e:"."}function Fr(t){if(L(t),t.length===0)return".";let e=V(t.charCodeAt(0)),n=V(t.charCodeAt(t.length-1));return t=Je(t,!e,"/",V),t.length===0&&!e&&(t="."),t.length>0&&n&&(t+="/"),e?`/${t}`:t}function Mr(t){return L(t),t.length>0&&V(t.charCodeAt(0))}function Cs(...t){if(t.length===0)return".";let e;for(let n=0,r=t.length;n<r;++n){let i=t[n];L(i),i.length>0&&(e?e+=`/${i}`:e=i)}return e?Fr(e):"."}function Os(t,e){if(L(t),L(e),t===e||(t=Bn(t),e=Bn(e),t===e))return"";let n=1,r=t.length;for(;n<r&&V(t.charCodeAt(n));++n);let i=r-n,s=1,a=e.length;for(;s<a&&V(e.charCodeAt(s));++s);let o=a-s,l=i<o?i:o,p=-1,u=0;for(;u<=l;++u){if(u===l){if(o>l){if(V(e.charCodeAt(s+u)))return e.slice(s+u+1);if(u===0)return e.slice(s+u)}else i>l&&(V(t.charCodeAt(n+u))?p=u:u===0&&(p=0));break}let d=t.charCodeAt(n+u),f=e.charCodeAt(s+u);if(d!==f)break;V(d)&&(p=u)}let c="";for(u=n+p+1;u<=r;++u)(u===r||V(t.charCodeAt(u)))&&(c.length===0?c+="..":c+="/..");return c.length>0?c+e.slice(s+p):(s+=p,V(e.charCodeAt(s))&&++s,e.slice(s))}function ws(t){return t}function As(t){if(t.length===0)return".";let e=-1,n=!1;for(let r=t.length-1;r>=1;--r)if(V(t.charCodeAt(r))){if(n){e=r;break}}else n=!0;return e===-1?V(t.charCodeAt(0))?"/":".":_e(t.slice(0,e),V)}function Rs(t,e=""){if(L(t),t.length===0)return t;if(typeof e!="string")throw new TypeError(`Suffix must be a string. Received ${JSON.stringify(e)}`);let n=sn(t,V),r=_e(n,V);return e?on(r,e):r}function Ps(t){L(t);let e=-1,n=0,r=-1,i=!0,s=0;for(let a=t.length-1;a>=0;--a){let o=t.charCodeAt(a);if(V(o)){if(!i){n=a+1;break}continue}r===-1&&(i=!1,r=a+1),o===46?e===-1?e=a:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||r===-1||s===0||s===1&&e===r-1&&e===n+1?"":t.slice(e,r)}function vs(t){if(t===null||typeof t!="object")throw new TypeError(`The "pathObject" argument must be of type Object. Received type ${typeof t}`);return nn("/",t)}function Ss(t){L(t);let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let n=V(t.charCodeAt(0)),r;n?(e.root="/",r=1):r=0;let i=-1,s=0,a=-1,o=!0,l=t.length-1,p=0;for(;l>=r;--l){let u=t.charCodeAt(l);if(V(u)){if(!o){s=l+1;break}continue}a===-1&&(o=!1,a=l+1),u===46?i===-1?i=l:p!==1&&(p=1):i!==-1&&(p=-1)}return i===-1||a===-1||p===0||p===1&&i===a-1&&i===s+1?(a!==-1&&(s===0&&n?e.base=e.name=t.slice(1,a):e.base=e.name=t.slice(s,a)),e.base=e.base||"/"):(s===0&&n?(e.name=t.slice(1,i),e.base=t.slice(1,a)):(e.name=t.slice(s,i),e.base=t.slice(s,a)),e.ext=t.slice(i,a)),s>0?e.dir=_e(t.slice(0,s-1),V):n&&(e.dir="/"),e}function $s(t){if(t=t instanceof URL?t:new URL(t),t.protocol!="file:")throw new TypeError("Must be a file URL.");return decodeURIComponent(t.pathname.replace(/%(?![0-9A-Fa-f]{2})/g,"%25"))}function Es(t){if(!Mr(t))throw new TypeError("Must be an absolute path.");let e=new URL("file:///");return e.pathname=rn(t.replace(/%/g,"%25").replace(/\\/g,"%5C")),e}var ln=le?"\\":"/",Xe=le?/[\\/]+/:/\/+/;var Vs=le?Lt:_t,{join:ks,normalize:Hr}=Vs,Kn=["!","$","(",")","*","+",".","=","?","[","\\","^","{","|"],Ns=["-","\\","]"];function Wn(t,{extended:e=!0,globstar:n=!0,os:r=jn,caseInsensitive:i=!1}={}){if(t=="")return/(?!)/;let s=r=="windows"?"(?:\\\\|/)+":"/+",a=r=="windows"?"(?:\\\\|/)*":"/*",o=r=="windows"?["\\","/"]:["/"],l=r=="windows"?"(?:[^\\\\/]*(?:\\\\|/|$)+)*":"(?:[^/]*(?:/|$)+)*",p=r=="windows"?"[^\\\\/]*":"[^/]*",u=r=="windows"?"`":"\\",c=t.length;for(;c>1&&o.includes(t[c-1]);c--);t=t.slice(0,c);let d="";for(let f=0;f<t.length;){let m="",g=[],T=!1,S=!1,P=!1,h=f;for(;h<t.length&&!o.includes(t[h]);h++){if(S){S=!1,m+=(T?Ns:Kn).includes(t[h])?`\\${t[h]}`:t[h];continue}if(t[h]==u){S=!0;continue}if(t[h]=="[")if(T){if(t[h+1]==":"){let R=h+1,y="";for(;t[R+1]!=null&&t[R+1]!=":";)y+=t[R+1],R++;if(t[R+1]==":"&&t[R+2]=="]"){h=R+2,y=="alnum"?m+="\\dA-Za-z":y=="alpha"?m+="A-Za-z":y=="ascii"?m+="\0-\x7F":y=="blank"?m+="	 ":y=="cntrl"?m+="\0-\x7F":y=="digit"?m+="\\d":y=="graph"?m+="!-~":y=="lower"?m+="a-z":y=="print"?m+=" -~":y=="punct"?m+=`!"#$%&'()*+,\\-./:;<=>?@[\\\\\\]^_\u2018{|}~`:y=="space"?m+="\\s\v":y=="upper"?m+="A-Z":y=="word"?m+="\\w":y=="xdigit"&&(m+="\\dA-Fa-f");continue}}}else{T=!0,m+="[",t[h+1]=="!"?(h++,m+="^"):t[h+1]=="^"&&(h++,m+="\\^");continue}if(t[h]=="]"&&T){T=!1,m+="]";continue}if(T){t[h]=="\\"?m+="\\\\":m+=t[h];continue}if(t[h]==")"&&g.length>0&&g[g.length-1]!="BRACE"){m+=")";let R=g.pop();R=="!"?m+=p:R!="@"&&(m+=R);continue}if(t[h]=="|"&&g.length>0&&g[g.length-1]!="BRACE"){m+="|";continue}if(t[h]=="+"&&e&&t[h+1]=="("){h++,g.push("+"),m+="(?:";continue}if(t[h]=="@"&&e&&t[h+1]=="("){h++,g.push("@"),m+="(?:";continue}if(t[h]=="?"){e&&t[h+1]=="("?(h++,g.push("?"),m+="(?:"):m+=".";continue}if(t[h]=="!"&&e&&t[h+1]=="("){h++,g.push("!"),m+="(?!";continue}if(t[h]=="{"){g.push("BRACE"),m+="(?:";continue}if(t[h]=="}"&&g[g.length-1]=="BRACE"){g.pop(),m+=")";continue}if(t[h]==","&&g[g.length-1]=="BRACE"){m+="|";continue}if(t[h]=="*"){if(e&&t[h+1]=="(")h++,g.push("*"),m+="(?:";else{let R=t[h-1],y=1;for(;t[h+1]=="*";)h++,y++;let A=t[h+1];n&&y==2&&[...o,void 0].includes(R)&&[...o,void 0].includes(A)?(m+=l,P=!0):m+=p}continue}m+=Kn.includes(t[h])?`\\${t[h]}`:t[h]}if(g.length>0||T||S){m="";for(let R of t.slice(f,h))m+=Kn.includes(R)?`\\${R}`:R,P=!1}for(d+=m,P||(d+=h<t.length?s:a,P=!0);o.includes(t[h]);)h++;if(!(h>f))throw new Error("Assertion failure: i > j (potential infinite loop)");f=h}return d=`^${d}$`,new RegExp(d,i?"i":"")}function jr(t){let e={"{":"}","(":")","[":"]"},n=/\\(.)|(^!|\*|\?|[\].+)]\?|\[[^\\\]]+\]|\{[^\\}]+\}|\(\?[:!=][^\\)]+\)|\([^|]+\|[^\\)]+\))/;if(t==="")return!1;let r;for(;r=n.exec(t);){if(r[2])return!0;let i=r.index+r[0].length,s=r[1],a=s?e[s]:null;if(s&&a){let o=t.indexOf(a,i);o!==-1&&(i=o+1)}t=t.slice(i)}return!1}function Gs(t,{globstar:e=!1}={}){if(t.match(/\0/g))throw new Error(`Glob contains invalid characters: "${t}"`);if(!e)return Hr(t);let n=Xe.source,r=new RegExp(`(?<=(${n}|^)\\*\\*${n})\\.\\.(?=${n}|$)`,"g");return Hr(t.replace(r,"\0")).replace(/\0/g,"..")}function qn(t,{extended:e=!0,globstar:n=!1}={}){if(!n||t.length==0)return ks(...t);if(t.length===0)return".";let r;for(let i of t){let s=i;s.length>0&&(r?r+=`${ln}${s}`:r=s)}return r?Gs(r,{extended:e,globstar:n}):"."}var Ds=le?Lt:_t;var{basename:zn,delimiter:Kl,dirname:Yn,extname:Wl,format:ql,fromFileUrl:Ur,isAbsolute:Br,join:Fe,normalize:pn,parse:zl,relative:Yl,resolve:$e,sep:Ls,toFileUrl:Zl,toNamespacedPath:Jl}=Ds;async function It(t){t=me(t),t=pn(t);let e=zn(t),n=await Deno.stat(t);return{path:t,name:e,isFile:n.isFile,isDirectory:n.isDirectory,isSymlink:n.isSymlink}}function me(t){return t instanceof URL?Ur(t):t}function Qn(t,e){try{let n=Deno.statSync(t);if(e&&(e.isReadable||e.isDirectory||e.isFile)){if(e.isDirectory&&e.isFile)throw new TypeError("ExistsOptions.options.isDirectory and ExistsOptions.options.isFile must not be true together.");if(e.isDirectory&&!n.isDirectory||e.isFile&&!n.isFile)return!1;if(e.isReadable)return n.mode==null?!0:Deno.uid()==n.uid?(n.mode&256)==256:Deno.gid()==n.gid?(n.mode&32)==32:(n.mode&4)==4}return!0}catch(n){if(n instanceof Deno.errors.NotFound)return!1;if(n instanceof Deno.errors.PermissionDenied&&Deno.permissions.querySync({name:"read",path:t}).state==="granted")return!e?.isReadable;throw n}}var un=class extends Error{constructor(n,r){super(`${n instanceof Error?n.message:n} for path "${r}"`);this.name="WalkError";this.path=r,this.cause=n}};function er(t,e,n,r){return!(e&&!e.some(i=>t.endsWith(i))||n&&!n.some(i=>!!t.match(i))||r&&r.some(i=>!!t.match(i)))}function Is(t,e){return t instanceof un?t:new un(t,e)}async function*cn(t,{maxDepth:e=1/0,includeFiles:n=!0,includeDirs:r=!0,followSymlinks:i=!1,exts:s=void 0,match:a=void 0,skip:o=void 0}={}){if(!(e<0)&&(t=me(t),r&&er(t,s,a,o)&&(yield await It(t)),!(e<1||!er(t,void 0,void 0,o))))try{for await(let l of Deno.readDir(t)){Ie(l.name!=null);let p=Fe(t,l.name),{isSymlink:u,isDirectory:c}=l;if(u){if(!i)continue;p=await Deno.realPath(p),{isSymlink:u,isDirectory:c}=await Deno.lstat(p)}u||c?yield*cn(p,{maxDepth:e-1,includeFiles:n,includeDirs:r,followSymlinks:i,exts:s,match:a,skip:o}):n&&er(p,s,a,o)&&(yield{path:p,...l})}}catch(l){throw Is(l,pn(t))}}function Fs(t){let e=Xe.source,n=t.replace(new RegExp(`^${e}|${e}$`,"g"),"").split(Xe),r=Br(t);return{segments:n,isAbsolute:r,hasTrailingSep:!!t.match(new RegExp(`${e}$`)),winRoot:le&&r?n.shift():void 0}}function Kr(t){if(!(t instanceof Deno.errors.NotFound))throw t}function Ms(t,e){return t.path<e.path?-1:t.path>e.path?1:0}async function*Wr(t,{root:e=Deno.cwd(),exclude:n=[],includeDirs:r=!0,extended:i=!0,globstar:s=!0,caseInsensitive:a,followSymlinks:o}={}){let l={extended:i,globstar:s,caseInsensitive:a},p=$e(e),u=y=>$e(p,y),c=n.map(u).map(y=>Wn(y,l)),d=y=>!c.some(A=>!!y.match(A)),{segments:f,isAbsolute:m,hasTrailingSep:g,winRoot:T}=Fs(me(t)),S=m?T??"/":p;for(;f.length>0&&!jr(f[0]);){let y=f.shift();Ie(y!=null),S=qn([S,y],l)}let P;try{P=await It(S)}catch(y){return Kr(y)}async function*h(y,A){if(y.isDirectory){if(A==".."){let W=qn([y.path,".."],l);try{if(d(W))return yield await It(W)}catch(ve){Kr(ve)}return}else if(A=="**")return yield*cn(y.path,{skip:c,maxDepth:s?1/0:1,followSymlinks:o})}else return;let te=Wn(A,l);for await(let W of cn(y.path,{maxDepth:1,skip:c,followSymlinks:o}))W.path!=y.path&&W.name.match(te)&&(yield W)}let R=[P];for(let y of f){let A=new Map;await Promise.all(R.map(async te=>{for await(let W of h(te,y))A.set(W.path,W)})),R=[...A.values()].sort(Ms)}g&&(R=R.filter(y=>y.isDirectory)),r||(R=R.filter(y=>!y.isDirectory)),yield*R}var Lp=new Deno.errors.AlreadyExists("dest already exists.");var Ft={};Ze(Ft,{bel:()=>mn,clearScreen:()=>oo,clearTerminal:()=>ao,cursorBackward:()=>Ws,cursorDown:()=>Bs,cursorForward:()=>Ks,cursorHide:()=>Ys,cursorLeft:()=>Yr,cursorMove:()=>Us,cursorNextLine:()=>qs,cursorPosition:()=>ir,cursorPrevLine:()=>zs,cursorRestore:()=>Xs,cursorSave:()=>Js,cursorShow:()=>Zs,cursorTo:()=>js,cursorUp:()=>zr,eraseDown:()=>no,eraseLine:()=>Zr,eraseLineEnd:()=>ro,eraseLineStart:()=>io,eraseLines:()=>so,eraseScreen:()=>rr,eraseUp:()=>to,image:()=>po,link:()=>lo,scrollDown:()=>eo,scrollUp:()=>Qs});var xe=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"];function tr(t){let e=typeof t=="string"?new TextEncoder().encode(t):t instanceof Uint8Array?t:new Uint8Array(t),n="",r,i=e.length;for(r=2;r<i;r+=3)n+=xe[e[r-2]>>2],n+=xe[(e[r-2]&3)<<4|e[r-1]>>4],n+=xe[(e[r-1]&15)<<2|e[r]>>6],n+=xe[e[r]&63];return r===i+1&&(n+=xe[e[r-2]>>2],n+=xe[(e[r-2]&3)<<4],n+="=="),r===i&&(n+=xe[e[r-2]>>2],n+=xe[(e[r-2]&3)<<4|e[r-1]>>4],n+=xe[(e[r-1]&15)<<2],n+="="),n}var gn="\x1B",$=`${gn}[`,nr=`${gn}]`,dn=";",mn="\x07",ir=`${$}6n`;function js(t,e){return typeof e!="number"?`${$}${t}G`:`${$}${e};${t}H`}function Us(t,e){let n="";return t<0?n+=`${$}${-t}D`:t>0&&(n+=`${$}${t}C`),e<0?n+=`${$}${-e}A`:e>0&&(n+=`${$}${e}B`),n}function zr(t=1){return`${$}${t}A`}function Bs(t=1){return`${$}${t}B`}function Ks(t=1){return`${$}${t}C`}function Ws(t=1){return`${$}${t}D`}function qs(t=1){return`${$}E`.repeat(t)}function zs(t=1){return`${$}F`.repeat(t)}var Yr=`${$}G`,Ys=`${$}?25l`,Zs=`${$}?25h`,Js=`${gn}7`,Xs=`${gn}8`;function Qs(t=1){return`${$}S`.repeat(t)}function eo(t=1){return`${$}T`.repeat(t)}var rr=`${$}2J`;function to(t=1){return`${$}1J`.repeat(t)}function no(t=1){return`${$}0J`.repeat(t)}var Zr=`${$}2K`,ro=`${$}0K`,io=`${$}1K`;function so(t){let e="";for(let n=0;n<t;n++)e+=Zr+(n<t-1?zr():"");return e+=Yr,e}var oo="\x1Bc",ao=Deno.build.os==="windows"?`${rr}${$}0f`:`${rr}${$}3J${$}H`;function lo(t,e){return[nr,"8",dn,dn,e,mn,t,nr,"8",dn,dn,mn].join("")}function po(t,e){let n=`${nr}1337;File=inline=1`;return e?.width&&(n+=`;width=${e.width}`),e?.height&&(n+=`;height=${e.height}`),e?.preserveAspectRatio===!1&&(n+=";preserveAspectRatio=0"),n+":"+tr(t)+mn}var su=Jr();function Jr(){let t=[],e=[],n=function(...s){return this?s.length?(i(s),this):this.toString():Jr()};n.text=function(s){return e.push([s,[]]),this},n.toString=function(){i();let s=t.join("");return t=[],s},n.toBuffer=function(){return new TextEncoder().encode(this.toString())};let r=Object.entries(Ft);for(let[s,a]of r)Object.defineProperty(n,s,{get(){return e.push([a,[]]),this}});return n;function i(s){e.length&&(s&&(e[e.length-1][1]=s),t.push(...e.map(([a,o])=>typeof a=="string"?a:a.call(n,...o))),e=[])}}var jt={};Ze(jt,{bgBlack:()=>Ro,bgBlue:()=>$o,bgBrightBlack:()=>No,bgBrightBlue:()=>_o,bgBrightCyan:()=>Fo,bgBrightGreen:()=>Do,bgBrightMagenta:()=>Io,bgBrightRed:()=>Go,bgBrightWhite:()=>Mo,bgBrightYellow:()=>Lo,bgCyan:()=>Vo,bgGreen:()=>vo,bgMagenta:()=>Eo,bgRed:()=>Po,bgRgb24:()=>Bo,bgRgb8:()=>jo,bgWhite:()=>ko,bgYellow:()=>So,black:()=>fo,blue:()=>ho,bold:()=>v,brightBlack:()=>ei,brightBlue:()=>E,brightCyan:()=>wo,brightGreen:()=>Co,brightMagenta:()=>Ht,brightRed:()=>xo,brightWhite:()=>Ao,brightYellow:()=>Oo,cyan:()=>or,dim:()=>M,getColorEnabled:()=>fn,gray:()=>bo,green:()=>Ce,hidden:()=>mo,inverse:()=>co,italic:()=>ie,magenta:()=>yo,red:()=>U,reset:()=>uo,rgb24:()=>Uo,rgb8:()=>Ho,setColorEnabled:()=>Mt,strikethrough:()=>go,stripColor:()=>ge,underline:()=>Ve,white:()=>To,yellow:()=>N});var{Deno:Xr}=globalThis,Qr=typeof Xr?.noColor=="boolean"?Xr.noColor:!0,sr=!Qr;function Mt(t){Qr||(sr=t)}function fn(){return sr}function b(t,e){return{open:`\x1B[${t.join(";")}m`,close:`\x1B[${e}m`,regexp:new RegExp(`\\x1b\\[${e}m`,"g")}}function x(t,e){return sr?`${e.open}${t.replace(e.regexp,e.open)}${e.close}`:t}function uo(t){return x(t,b([0],0))}function v(t){return x(t,b([1],22))}function M(t){return x(t,b([2],22))}function ie(t){return x(t,b([3],23))}function Ve(t){return x(t,b([4],24))}function co(t){return x(t,b([7],27))}function mo(t){return x(t,b([8],28))}function go(t){return x(t,b([9],29))}function fo(t){return x(t,b([30],39))}function U(t){return x(t,b([31],39))}function Ce(t){return x(t,b([32],39))}function N(t){return x(t,b([33],39))}function ho(t){return x(t,b([34],39))}function yo(t){return x(t,b([35],39))}function or(t){return x(t,b([36],39))}function To(t){return x(t,b([37],39))}function bo(t){return ei(t)}function ei(t){return x(t,b([90],39))}function xo(t){return x(t,b([91],39))}function Co(t){return x(t,b([92],39))}function Oo(t){return x(t,b([93],39))}function E(t){return x(t,b([94],39))}function Ht(t){return x(t,b([95],39))}function wo(t){return x(t,b([96],39))}function Ao(t){return x(t,b([97],39))}function Ro(t){return x(t,b([40],49))}function Po(t){return x(t,b([41],49))}function vo(t){return x(t,b([42],49))}function So(t){return x(t,b([43],49))}function $o(t){return x(t,b([44],49))}function Eo(t){return x(t,b([45],49))}function Vo(t){return x(t,b([46],49))}function ko(t){return x(t,b([47],49))}function No(t){return x(t,b([100],49))}function Go(t){return x(t,b([101],49))}function Do(t){return x(t,b([102],49))}function Lo(t){return x(t,b([103],49))}function _o(t){return x(t,b([104],49))}function Io(t){return x(t,b([105],49))}function Fo(t){return x(t,b([106],49))}function Mo(t){return x(t,b([107],49))}function Ee(t,e=255,n=0){return Math.trunc(Math.max(Math.min(t,e),n))}function Ho(t,e){return x(t,b([38,5,Ee(e)],39))}function jo(t,e){return x(t,b([48,5,Ee(e)],49))}function Uo(t,e){return typeof e=="number"?x(t,b([38,2,e>>16&255,e>>8&255,e&255],39)):x(t,b([38,2,Ee(e.r),Ee(e.g),Ee(e.b)],39))}function Bo(t,e){return typeof e=="number"?x(t,b([48,2,e>>16&255,e>>8&255,e&255],49)):x(t,b([48,2,Ee(e.r),Ee(e.g),Ee(e.b)],49))}var Ko=new RegExp(["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))"].join("|"),"g");function ge(t){return t.replace(Ko,"")}var ti=Object.create(null),Wo=Object.keys(jt);for(let t of Wo)t==="setColorEnabled"||t==="getColorEnabled"||Object.defineProperty(ti,t,{get(){return ar([...this._stack,t])}});var au=ar();function ar(t=[]){let e=function(n,...r){if(n){let s=t.length-1;return t.reduce((a,o,l)=>l===s?jt[o](a,...r):jt[o](a),n)}let i=t.slice();return t=[],ar(i)};return Object.setPrototypeOf(e,ti),e._stack=t,e}function ni({stdin:t=Deno.stdin,stdout:e=Deno.stdout}={}){let n=new Uint8Array(8);Deno.stdin.setRaw(!0),e.writeSync(new TextEncoder().encode(ir)),t.readSync(n),Deno.stdin.setRaw(!1);let[r,i]=new TextDecoder().decode(n).match(/\[(\d+);(\d+)R/)?.slice(1,3).map(Number)??[0,0];return{x:i,y:r}}var lr=ri();function ri(t){let e="",n=[],r=t?.stdout??Deno.stdout,i=t?.stdin??Deno.stdin,s=function(...l){return this?(o(l),r.writeSync(new TextEncoder().encode(e)),this):ri(l[0]??t)};s.text=function(l){return n.push([l,[]]),o(),r.writeSync(new TextEncoder().encode(e)),this},s.getCursorPosition=()=>ni({stdout:r,stdin:i});let a=Object.entries(Ft);for(let[l,p]of a)l!=="cursorPosition"&&Object.defineProperty(s,l,{get(){return n.push([p,[]]),this}});return s;function o(l){n.length&&(l&&(n[n.length-1][1]=l),e=n.reduce((p,[u,c])=>p+(typeof u=="string"?u:u.call(s,...c)),""),n=[])}}function hn(t,e){if(t.length==0)return e.length;if(e.length==0)return t.length;let n=[];for(let r=0;r<=e.length;r++)n[r]=[r];for(let r=0;r<=t.length;r++)n[0][r]=r;for(let r=1;r<=e.length;r++)for(let i=1;i<=t.length;i++)e.charAt(r-1)==t.charAt(i-1)?n[r][i]=n[r-1][i-1]:n[r][i]=Math.min(n[r-1][i-1]+1,Math.min(n[r][i-1]+1,n[r-1][i]+1));return n[e.length][t.length]}function He(t){return t.replace(/-([a-z])/g,e=>e[1].toUpperCase())}function ii(t){return t.replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase().replace(/_([a-z])/g,e=>e[1].toUpperCase())}function je(t,e){for(;e[0]==="-";)e=e.slice(1);for(let n of t)if(qo(n,e))return n}function Ut(t,e){let n=e.map(r=>[r.name,...r.aliases??[]]).flat().map(r=>G(r));return yn(" Did you mean option",G(t),n)}function si(t,e){return yn(" Did you mean type",t,e)}function yn(t,e,n){let r=Yo(e,n);return r?`${t} "${r}"?`:""}function G(t){return t.startsWith("-")?t:t.length>1?`--${t}`:`-${t}`}function qo(t,e){return t.name===e||t.aliases&&t.aliases.indexOf(e)!==-1}function oi(t,e){for(let n of e){if(n.name.indexOf("*")===-1)continue;let r=zo(t,n);if(r)return r={...r,name:t},e.push(r),r}}function zo(t,e){let n=e.name.split("."),r=t.split(".");if(n.length!==r.length)return!1;let i=Math.max(n.length,r.length);for(let s=0;s<i;s++)if(n[s]!==r[s]&&n[s]!=="*")return!1;return e}function Yo(t,e){let n=1/0,r=0;for(let i=0;i<e.length;i++){let s=hn(t,e[i]);s<n&&(n=s,r=i)}return e[r]}function Tn(t){return typeof t.default=="function"?t.default():t.default}var ke=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,ke.prototype)}},Qe=class extends ke{constructor(e,n){super(`Unknown required option "${G(e)}".${Ut(e,n)}`),Object.setPrototypeOf(this,Qe.prototype)}},et=class extends ke{constructor(e,n){super(`Unknown conflicting option "${G(e)}".${Ut(e,n)}`),Object.setPrototypeOf(this,et.prototype)}},Ne=class extends ke{constructor(e,n){super(`Unknown type "${e}".${si(e,n)}`),Object.setPrototypeOf(this,Ne.prototype)}},_=class extends ke{constructor(e){super(e),Object.setPrototypeOf(this,_.prototype)}},tt=class extends _{constructor(e){super(`Option "${G(e).replace(/^--no-/,"--")}" can only occur once, but was found several times.`),Object.setPrototypeOf(this,tt.prototype)}},nt=class extends _{constructor(e,n){super(`Invalid option "${G(e)}".${Ut(e,n)}`),Object.setPrototypeOf(this,nt.prototype)}},Oe=class extends _{constructor(e,n){super(`Unknown option "${G(e)}".${Ut(e,n)}`),Object.setPrototypeOf(this,Oe.prototype)}},we=class extends _{constructor(e){super(`Missing value for option "${G(e)}".`),Object.setPrototypeOf(this,we.prototype)}},Ue=class extends _{constructor(e,n,r){super(`Option "${G(e)}" must be of type "${n}", but got "${r}".`),Object.setPrototypeOf(this,Ue.prototype)}},bn=class extends _{constructor(e,n){super(`Option "${G(e)}" doesn't take a value, but got "${n}".`),Object.setPrototypeOf(this,Ue.prototype)}},rt=class extends _{constructor(e){super(`Option "${G(e)}" cannot be combined with other options.`),Object.setPrototypeOf(this,rt.prototype)}},it=class extends _{constructor(e,n){super(`Option "${G(e)}" conflicts with option "${G(n)}".`),Object.setPrototypeOf(this,it.prototype)}},st=class extends _{constructor(e,n){super(`Option "${G(e)}" depends on option "${G(n)}".`),Object.setPrototypeOf(this,st.prototype)}},ot=class extends _{constructor(e){super(`Missing required option "${G(e)}".`),Object.setPrototypeOf(this,ot.prototype)}},Ge=class extends _{constructor(e){super(`An required argument cannot follow an optional argument, but "${e}"  is defined as required.`),Object.setPrototypeOf(this,Ge.prototype)}},De=class extends _{constructor(e){super(`An argument cannot follow an variadic argument, but got "${e}".`),Object.setPrototypeOf(this,De.prototype)}},Ae=class extends _{constructor({label:e,name:n,value:r,type:i},s){super(`${e} "${n}" must be of type "${i}", but got "${r}".`+(s?` Expected values: ${s.map(a=>`"${a}"`).join(", ")}`:"")),Object.setPrototypeOf(this,we.prototype)}};function xn(t,e,n=[]){let r=e.map(i=>i.getName()).filter(i=>!n.includes(i));return yn(" Did you mean command",t,r)}var Zo=/^[<\[].+[\]>]$/,Jo=/[<\[:>\]]/;function Cn(t){let e=t.trim().split(/[, =] */g),n=[];for(;e[e.length-1]&&Zo.test(e[e.length-1]);)n.unshift(e.pop());let r=n.join(" ");return{flags:e,typeDefinition:r,equalsSign:t.includes("=")}}function at(t,e=!0,n){let r=[],i=!1,s=!1,a=t.split(/ +/);for(let o of a){if(e&&s)throw new De(o);let l=o.split(Jo);if(!l[1]){n&&r.push(l[0]);continue}let p=l[2]||"string",u={optionalValue:o[0]==="[",requiredValue:o[0]==="<",name:l[1],action:l[3]||p,variadic:!1,list:p?o.indexOf(p+"[]")!==-1:!1,type:p};if(e&&!u.optionalValue&&i)throw new Ge(u.name);if(o[0]==="["&&(i=!0),u.name.length>3){let c=u.name.slice(0,3)==="...",d=u.name.slice(-3)==="...";s=u.variadic=c||d,c?u.name=u.name.slice(3):d&&(u.name=u.name.slice(0,-3))}r.push(u)}return r}function Bt(t){let e=t.split(/\r?\n|\r/g),n="",r=0;for(let i of e)(n||i.trim())&&(n?n+=i.slice(r):(n=i.trimStart(),r=i.length-n.length),n+=`
`);return n.trimEnd()}function Be(t,e){return e?t.trim().split(`
`,1)[0].trim():Bt(t)}var H=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,H.prototype)}},B=class extends H{constructor(n,{exitCode:r}={}){super(n);Object.setPrototypeOf(this,B.prototype),this.exitCode=r??1}},lt=class extends H{constructor(e){super(`Option with name "${G(e)}" already exists.`),Object.setPrototypeOf(this,lt.prototype)}},pt=class extends H{constructor(){super("Missing command name."),Object.setPrototypeOf(this,pt.prototype)}},ut=class extends H{constructor(e){super(`Duplicate command name "${e}".`),Object.setPrototypeOf(this,ut.prototype)}},ct=class extends H{constructor(e){super(`Duplicate command alias "${e}".`),Object.setPrototypeOf(this,ct.prototype)}},dt=class extends H{constructor(e,n,r){super(`Unknown command "${e}".${xn(e,n,r)}`),Object.setPrototypeOf(this,dt.prototype)}},mt=class extends H{constructor(e){super(`Type with name "${e}" already exists.`),Object.setPrototypeOf(this,mt.prototype)}},gt=class extends H{constructor(e){super(`Completion with name "${e}" already exists.`),Object.setPrototypeOf(this,gt.prototype)}},ft=class extends H{constructor(e){super(`Example with name "${e}" already exists.`),Object.setPrototypeOf(this,ft.prototype)}},ht=class extends H{constructor(e){super(`Environment variable with name "${e}" already exists.`),Object.setPrototypeOf(this,ht.prototype)}},yt=class extends B{constructor(e){super(`Missing required environment variable "${e.names[0]}".`),Object.setPrototypeOf(this,yt.prototype)}},Tt=class extends H{constructor(e){super(`An environment variable can only have one value, but "${e}" has more than one.`),Object.setPrototypeOf(this,Tt.prototype)}},bt=class extends H{constructor(e){super(`An environment variable cannot have an optional value, but "${e}" is defined as optional.`),Object.setPrototypeOf(this,bt.prototype)}},xt=class extends H{constructor(e){super(`An environment variable cannot have an variadic value, but "${e}" is defined as variadic.`),Object.setPrototypeOf(this,xt.prototype)}},Ct=class extends H{constructor(e,n){super(`Default command "${e}" not found.${xn(e,n)}`),Object.setPrototypeOf(this,Ct.prototype)}},Ot=class extends H{constructor(e){super(`Command executable not found: ${e}`),Object.setPrototypeOf(this,Ot.prototype)}};var Ke=class extends B{constructor(e,n,r){super(`Unknown command "${e}".${xn(e,n,r)}`),Object.setPrototypeOf(this,Ke.prototype)}},wt=class extends B{constructor(e){super(`No arguments allowed for command "${e}".`),Object.setPrototypeOf(this,wt.prototype)}},At=class extends B{constructor(e){super(`Missing argument(s): ${e.join(", ")}`),Object.setPrototypeOf(this,At.prototype)}},Rt=class extends B{constructor(e){super(`Missing argument: ${e}`),Object.setPrototypeOf(this,Rt.prototype)}},We=class extends B{constructor(e){super(`Too many arguments: ${e.join(" ")}`),Object.setPrototypeOf(this,We.prototype)}};var Kt=t=>{if(~["1","true"].indexOf(t.value))return!0;if(~["0","false"].indexOf(t.value))return!1;throw new Ae(t,["true","false","1","0"])};var Wt=t=>{let e=Number(t.value);if(Number.isFinite(e))return e;throw new Ae(t)};var qt=({value:t})=>t;function li(t,e,n=new Map){if(!e.flags)return;let r=Qo(t,e),i=Object.keys(t.flags);if(!(!i.length&&e.allowEmpty)){if(t.standalone){ea(t,n,i,r);return}for(let[s,a]of n)Xo(a,e),ta(t,a),na(t,a,r),ra(t,a,s);ia(t,n,e)}}function Xo(t,e){if(!je(e.flags??[],t.name))throw new Oe(t.name,e.flags??[])}function Qo(t,e){let n={};if(!e.flags?.length)return n;for(let r of e.flags){let i,s;if(r.name.startsWith("no-")){let o=r.name.replace(/^no-/,"");if(typeof t.flags[o]<"u"||je(e.flags,o))continue;i=He(o),s=!0}i||(i=He(r.name)),(!e.ignoreDefaults||typeof e.ignoreDefaults[i]>"u")&&typeof t.flags[i]>"u"&&(typeof r.default<"u"||typeof s<"u")&&(t.flags[i]=Tn(r)??s,n[r.name]=!0,typeof r.value=="function"&&(t.flags[i]=r.value(t.flags[i])))}return n}function ea(t,e,n,r){if(!(!t.standalone||n.length===1)){for(let[i,s]of e)if(!r[s.name]&&s!==t.standalone)throw new rt(t.standalone.name)}}function ta(t,e){if(e.conflicts?.length){for(let n of e.conflicts)if(pi(n,t.flags))throw new it(e.name,n)}}function na(t,e,n){if(e.depends){for(let r of e.depends)if(!pi(r,t.flags)&&!n[e.name])throw new st(e.name,r)}}function ra(t,e,n){if(!e.args)return;let r=e.args.length>1;for(let i=0;i<e.args.length;i++){if(!e.args[i].requiredValue)continue;if(!(r?typeof t.flags[n][i]<"u":typeof t.flags[n]<"u"))throw new we(e.name)}}function ia(t,e,n){if(!n.flags?.length)return;let r=[...e.values()];for(let i of n.flags)if(!(!i.required||He(i.name)in t.flags||(i.conflicts??[]).find(l=>!!t.flags[l])||r.find(l=>l.conflicts?.find(p=>p===i.name))))throw new ot(i.name)}function pi(t,e){let n=He(t);return typeof e[n]<"u"}var On=t=>{let e=Number(t.value);if(Number.isInteger(e))return e;throw new Ae(t)};var ui={string:qt,number:Wt,integer:On,boolean:Kt};function pr(t,e={}){let n,r;Array.isArray(t)?(r={},n=t):(r=t,n=t.unknown,t.unknown=[]),n=n.slice(),r.flags??={},r.literal??=[],r.unknown??=[],r.stopEarly=!1,r.stopOnUnknown=!1,e.dotted??=!0,sa(e);let i=oa(r,n,e);return li(r,e,i),e.dotted&&aa(r),r}function sa(t){t.flags?.forEach(e=>{e.depends?.forEach(n=>{if(!t.flags||!je(t.flags,n))throw new Qe(n,t.flags??[])}),e.conflicts?.forEach(n=>{if(!t.flags||!je(t.flags,n))throw new et(n,t.flags??[])})})}function oa(t,e,n){let r=new Map,i=!1;for(let s=0;s<e.length;s++){let R=function(y){if(p){t.flags[g]=!1;return}else if(!y.args?.length){t.flags[g]=void 0;return}let A=y.args[T];if(!A){let q=P();throw new Oe(q,n.flags??[])}if(A.type||(A.type="boolean"),y.args?.length&&!y.type?(typeof A.optionalValue>"u"||A.optionalValue===!1)&&typeof A.requiredValue>"u"&&(A.requiredValue=!0):A.type!=="boolean"&&(typeof A.optionalValue>"u"||A.optionalValue===!1)&&typeof A.requiredValue>"u"&&(A.requiredValue=!0),!A.requiredValue)S=!0;else if(S)throw new Ge(y.name);let te,W=!1;if(A.list&&ve(A)){let q=P().split(A.separator||",").map(pe=>{let Dt=Gt(y,A,pe);if(typeof Dt>"u")throw new Ue(y.name,A.type??"?",pe);return Dt});q?.length&&(te=q)}else ve(A)?te=Gt(y,A,P()):A.optionalValue&&A.type==="boolean"&&(te=!0);if(W&&typeof l>"u"){if(s++,!A.variadic)T++;else if(y.args[T+1])throw new De(P())}typeof te<"u"&&(y.args.length>1||A.variadic)?(t.flags[g]||(t.flags[g]=[]),t.flags[g].push(te),ve(A)&&R(y)):t.flags[g]=te;function ve(q){if(!y.args?.length)return!1;let pe=l??e[s+1];return!pe||y.args.length>1&&T>=y.args.length?!1:q.requiredValue?!0:y.equalsSign&&q.optionalValue&&!q.variadic&&typeof l>"u"?!1:q.optionalValue||q.variadic?pe[0]!=="-"||typeof l<"u"||q.type==="number"&&!isNaN(Number(pe)):!1}function Gt(q,pe,Dt){let Gr=n.parse?n.parse({label:"Option",type:pe.type||"string",name:`--${q.name}`,value:Dt}):pa(q,pe,Dt);return typeof Gr<"u"&&(W=!0),Gr}},a,o=e[s],l,p=!1;if(i){t.literal.push(o);continue}else if(o==="--"){i=!0;continue}else if(t.stopEarly||t.stopOnUnknown){t.unknown.push(o);continue}if(!(o.length>1&&o[0]==="-")){n.stopEarly&&(t.stopEarly=!0),t.unknown.push(o);continue}let c=o[1]!=="-",d=c?!1:o.length>3&&o[2]!=="-";if(!c&&!d)throw new nt(o,n.flags??[]);c&&o.length>2&&o[2]!=="."?(e.splice(s,1,...la(o)),o=e[s]):d&&o.startsWith("--no-")&&(p=!0);let f=o.indexOf("=");if(f!==-1&&(l=o.slice(f+1)||void 0,o=o.slice(0,f)),n.flags){if(a=je(n.flags,o),!a){let y=o.replace(/^-+/,"");if(a=oi(y,n.flags),!a){if(n.stopOnUnknown){t.stopOnUnknown=!0,t.unknown.push(e[s]);continue}throw new Oe(o,n.flags)}}}else a={name:o.replace(/^-+/,""),optionalValue:!0,type:"string"};a.standalone&&(t.standalone=a);let m=p?a.name.replace(/^no-?/,""):a.name,g=He(m);if(typeof t.flags[g]<"u"){if(!n.flags?.length)a.collect=!0;else if(!a.collect)throw new tt(o)}if(a.type&&!a.args?.length&&(a.args=[{type:a.type,requiredValue:a.requiredValue,optionalValue:a.optionalValue,variadic:a.variadic,list:a.list,separator:a.separator}]),n.flags?.length&&!a.args?.length&&typeof l<"u")throw new bn(a.name,l);let T=0,S=!1,P=()=>l??e[s+1],h=t.flags[g];if(R(a),typeof t.flags[g]>"u"){if(a.args?.[T]?.requiredValue)throw new we(a.name);typeof a.default<"u"?t.flags[g]=Tn(a):t.flags[g]=!0}if(a.value)t.flags[g]=a.value(t.flags[g],h);else if(a.collect){let y=typeof h<"u"?Array.isArray(h)?h:[h]:[];y.push(t.flags[g]),t.flags[g]=y}r.set(g,a),n.option?.(a,t.flags[g])}return r}function aa(t){t.flags=Object.keys(t.flags).reduce((e,n)=>(~n.indexOf(".")?n.split(".").reduce((r,i,s,a)=>(s===a.length-1?r[i]=t.flags[n]:r[i]=r[i]??{},r[i]),e):e[n]=t.flags[n],e),{})}function la(t){t=t.slice(1);let e=[],n=t.indexOf("="),r=(n!==-1?t.slice(0,n):t).split("");return isNaN(Number(t[t.length-1]))?r.forEach(i=>e.push(`-${i}`)):(e.push(`-${r.shift()}`),r.length&&e.push(r.join(""))),n!==-1&&(e[e.length-1]+=t.slice(n)),e}function pa(t,e,n){let r=e.type||"string",i=ui[r];if(!i)throw new Ne(r,Object.keys(ui));return i({label:"Option",type:r,name:`--${t.name}`,value:n})}var K=class{};var wn=class extends K{parse(e){return Kt(e)}complete(){return["true","false"]}};var Re=class extends K{parse(e){return qt(e)}};var qe=class extends Re{constructor(){super()}};var An=class extends K{parse(e){return Wt(e)}};var ci={top:"\u2500",topMid:"\u252C",topLeft:"\u250C",topRight:"\u2510",bottom:"\u2500",bottomMid:"\u2534",bottomLeft:"\u2514",bottomRight:"\u2518",left:"\u2502",leftMid:"\u251C",mid:"\u2500",midMid:"\u253C",right:"\u2502",rightMid:"\u2524",middle:"\u2502"};var z=class{constructor(e){this.value=e;this.options={}}get length(){return this.toString().length}static from(e){let n=new this(e);return e instanceof z&&(n.options={...e.options}),n}toString(){return this.value.toString()}setValue(e){return this.value=e,this}clone(e){let n=new z(e??this);return n.options={...this.options},n}border(e,n=!0){return(n||typeof this.options.border>"u")&&(this.options.border=e),this}colSpan(e,n=!0){return(n||typeof this.options.colSpan>"u")&&(this.options.colSpan=e),this}rowSpan(e,n=!0){return(n||typeof this.options.rowSpan>"u")&&(this.options.rowSpan=e),this}align(e,n=!0){return(n||typeof this.options.align>"u")&&(this.options.align=e),this}getBorder(){return this.options.border===!0}getColSpan(){return typeof this.options.colSpan=="number"&&this.options.colSpan>0?this.options.colSpan:1}getRowSpan(){return typeof this.options.rowSpan=="number"&&this.options.rowSpan>0?this.options.rowSpan:1}getAlign(){return this.options.align??"left"}};var X=class extends Array{constructor(){super(...arguments);this.options={}}static from(n){let r=new this(...n);return n instanceof X&&(r.options={...n.options}),r}clone(){let n=new X(...this.map(r=>r instanceof z?r.clone():r));return n.options={...this.options},n}border(n,r=!0){return(r||typeof this.options.border>"u")&&(this.options.border=n),this}align(n,r=!0){return(r||typeof this.options.align>"u")&&(this.options.align=n),this}getBorder(){return this.options.border===!0}hasBorder(){return this.getBorder()||this.some(n=>n instanceof z&&n.getBorder())}getAlign(){return this.options.align??"left"}};function ur(t,e){let n="",r=e.split(`
`)[0]?.split(/ /g);for(let i=0;i<r.length;i++){let s=r[i];if(n){let a=ze(s);if(ze(n)+a>=t)break}n+=(i>0?" ":"")+s}return n}function di(t,e,n){let r=e.map(i=>{let s=i[t];return(s instanceof z&&s.getColSpan()>1?"":s?.toString()||"").split(`
`).map(o=>{let l=typeof n>"u"?o:ur(n,o);return ze(l)||0})}).flat();return Math.max(...r)}var ze=t=>{t=ge(t);let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r>=19968&&r<=40869?e+=2:e+=1}return e};var Rn=class{constructor(e,n){this.table=e;this.options=n}toString(){let e=this.createLayout();return e.rows.length?this.renderRows(e):""}createLayout(){Object.keys(this.options.chars).forEach(l=>{typeof this.options.chars[l]!="string"&&(this.options.chars[l]="")});let e=this.table.getBorder()||this.table.hasBodyBorder(),n=this.table.hasHeaderBorder(),r=n||e,i=this.#e(),s=Math.max(...i.map(l=>l.length));for(let l of i){let p=l.length;if(p<s){let u=s-p;for(let c=0;c<u;c++)l.push(this.createCell(null,l))}}let a=[],o=[];for(let l=0;l<s;l++){let p=Array.isArray(this.options.minColWidth)?this.options.minColWidth[l]:this.options.minColWidth,u=Array.isArray(this.options.maxColWidth)?this.options.maxColWidth[l]:this.options.maxColWidth,c=di(l,i,u);o[l]=Math.min(u,Math.max(p,c)),a[l]=Array.isArray(this.options.padding)?this.options.padding[l]:this.options.padding}return{padding:a,width:o,rows:i,columns:s,hasBorder:r,hasBodyBorder:e,hasHeaderBorder:n}}#e(){let e=this.table.getHeader(),n=e?[e,...this.table]:this.table.slice();return n.some(i=>i.some(s=>s instanceof z&&(s.getColSpan()>1||s.getRowSpan()>1)))?this.spanRows(n):n.map(i=>{let s=this.createRow(i);for(let a=0;a<i.length;a++)s[a]=this.createCell(i[a],s);return s})}spanRows(e){let n=[],r=1,i=-1;for(;i++,!(i===e.length&&n.every(o=>o===1));){let s=e[i]=this.createRow(e[i]||[]),a=-1;for(;a++,!(a===s.length&&a===n.length&&r===1);){if(r>1){r--,n[a]=n[a-1],s.splice(a,this.getDeleteCount(e,i,a),s[a-1]);continue}if(n[a]>1){n[a]--,e[i].splice(a,this.getDeleteCount(e,i,a),e[i-1][a]);continue}let o=s[a]=this.createCell(s[a]||null,s);r=o.getColSpan(),n[a]=o.getRowSpan()}}return e}getDeleteCount(e,n,r){return r<=e[n].length-1&&typeof e[n][r]>"u"?1:0}createRow(e){return X.from(e).border(this.table.getBorder(),!1).align(this.table.getAlign(),!1)}createCell(e,n){return z.from(e??"").border(n.getBorder(),!1).align(n.getAlign(),!1)}renderRows(e){let n="",r=new Array(e.columns).fill(1);for(let i=0;i<e.rows.length;i++)n+=this.renderRow(r,i,e);return n.slice(0,-1)}renderRow(e,n,r,i){let s=r.rows[n],a=r.rows[n-1],o=r.rows[n+1],l="",p=1;!i&&n===0&&s.hasBorder()&&(l+=this.renderBorderRow(void 0,s,e,r));let u=!1;l+=" ".repeat(this.options.indent||0);for(let c=0;c<r.columns;c++){if(p>1){p--,e[c]=e[c-1];continue}l+=this.renderCell(c,s,r),e[c]>1?i||e[c]--:(!a||a[c]!==s[c])&&(e[c]=s[c].getRowSpan()),p=s[c].getColSpan(),e[c]===1&&s[c].length&&(u=!0)}return r.columns>0&&(s[r.columns-1].getBorder()?l+=this.options.chars.right:r.hasBorder&&(l+=" ")),l+=`
`,u?l+this.renderRow(e,n,r,u):((n===0&&r.hasHeaderBorder||n<r.rows.length-1&&r.hasBodyBorder)&&(l+=this.renderBorderRow(s,o,e,r)),n===r.rows.length-1&&s.hasBorder()&&(l+=this.renderBorderRow(s,void 0,e,r)),l)}renderCell(e,n,r,i){let s="",a=n[e-1],o=n[e];i||(e===0?o.getBorder()?s+=this.options.chars.left:r.hasBorder&&(s+=" "):o.getBorder()||a?.getBorder()?s+=this.options.chars.middle:r.hasBorder&&(s+=" "));let l=r.width[e],p=o.getColSpan();if(p>1)for(let d=1;d<p;d++)l+=r.width[e+d]+r.padding[e+d],r.hasBorder&&(l+=r.padding[e+d]+1);let{current:u,next:c}=this.renderCellValue(o,l);return n[e].setValue(c),r.hasBorder&&(s+=" ".repeat(r.padding[e])),s+=u,(r.hasBorder||e<r.columns-1)&&(s+=" ".repeat(r.padding[e])),s}renderCellValue(e,n){let r=Math.min(n,ze(e.toString())),i=ur(r,e.toString()),s=ze(i)>r;s&&(i=i.slice(0,r));let a=e.toString().slice(i.length+(s?0:1)),o=n-ze(i),l=e.getAlign(),p;if(o===0)p=i;else if(l==="left")p=i+" ".repeat(o);else if(l==="center")p=" ".repeat(Math.floor(o/2))+i+" ".repeat(Math.ceil(o/2));else if(l==="right")p=" ".repeat(o)+i;else throw new Error("Unknown direction: "+l);return{current:p,next:e.clone(a)}}renderBorderRow(e,n,r,i){let s="",a=1;for(let o=0;o<i.columns;o++){if(r[o]>1){if(!n)throw new Error("invalid layout");if(a>1){a--;continue}}s+=this.renderBorderCell(o,e,n,r,i),a=n?.[o].getColSpan()??1}return s.length?" ".repeat(this.options.indent)+s+`
`:""}renderBorderCell(e,n,r,i,s){let a=n?.[e-1],o=r?.[e-1],l=n?.[e],p=r?.[e],u=!!a?.getBorder(),c=!!o?.getBorder(),d=!!l?.getBorder(),f=!!p?.getBorder(),m=P=>(P?.getColSpan()??1)>1,g=P=>(P?.getRowSpan()??1)>1,T="";if(e===0)i[e]>1?d?T+=this.options.chars.left:T+=" ":d&&f?T+=this.options.chars.leftMid:d?T+=this.options.chars.bottomLeft:f?T+=this.options.chars.topLeft:T+=" ";else if(e<s.columns)if(u&&f||d&&c){let P=m(a),h=m(o),R=m(l),y=m(p),A=g(a),te=g(o),W=g(l),ve=g(p),Gt=u&&f&&d&&c;A&&W&&te&&ve&&Gt?T+=this.options.chars.middle:P&&R&&h&&y&&Gt&&a===l&&o===p?T+=this.options.chars.mid:P&&R&&a===l?T+=this.options.chars.topMid:h&&y&&o===p?T+=this.options.chars.bottomMid:A&&te&&a===o?T+=this.options.chars.leftMid:W&&ve&&l===p?T+=this.options.chars.rightMid:T+=this.options.chars.midMid}else u&&d?m(a)&&m(l)&&a===l?T+=this.options.chars.bottom:T+=this.options.chars.bottomMid:d&&f?i[e]>1?T+=this.options.chars.left:T+=this.options.chars.leftMid:f&&c?m(o)&&m(p)&&o===p?T+=this.options.chars.top:T+=this.options.chars.topMid:u&&c?g(a)&&a===o?T+=this.options.chars.right:T+=this.options.chars.rightMid:u?T+=this.options.chars.bottomRight:d?T+=this.options.chars.bottomLeft:c?T+=this.options.chars.topRight:f?T+=this.options.chars.topLeft:T+=" ";let S=s.padding[e]+s.width[e]+s.padding[e];if(i[e]>1&&r){if(T+=this.renderCell(e,r,s,!0),r[e]===r[r.length-1])return d?T+=this.options.chars.right:T+=" ",T}else d&&f?T+=this.options.chars.mid.repeat(S):d?T+=this.options.chars.bottom.repeat(S):f?T+=this.options.chars.top.repeat(S):T+=" ".repeat(S);return e===s.columns-1&&(d&&f?T+=this.options.chars.rightMid:d?T+=this.options.chars.bottomRight:f?T+=this.options.chars.topRight:T+=" "),T}};var Pt=class extends Array{constructor(){super(...arguments);this.options={indent:0,border:!1,maxColWidth:1/0,minColWidth:0,padding:1,chars:{...Pt._chars}}}static from(n){let r=new this(...n);return n instanceof Pt&&(r.options={...n.options},r.headerRow=n.headerRow?X.from(n.headerRow):void 0),r}static fromJson(n){return new this().fromJson(n)}static chars(n){return Object.assign(this._chars,n),this}static render(n){Pt.from(n).render()}fromJson(n){return this.header(Object.keys(n[0])),this.body(n.map(r=>Object.values(r))),this}header(n){return this.headerRow=n instanceof X?n:X.from(n),this}body(n){return this.length=0,this.push(...n),this}clone(){let n=new Pt(...this.map(r=>r instanceof X?r.clone():X.from(r).clone()));return n.options={...this.options},n.headerRow=this.headerRow?.clone(),n}toString(){return new Rn(this,this.options).toString()}render(){return console.log(this.toString()),this}maxColWidth(n,r=!0){return(r||typeof this.options.maxColWidth>"u")&&(this.options.maxColWidth=n),this}minColWidth(n,r=!0){return(r||typeof this.options.minColWidth>"u")&&(this.options.minColWidth=n),this}indent(n,r=!0){return(r||typeof this.options.indent>"u")&&(this.options.indent=n),this}padding(n,r=!0){return(r||typeof this.options.padding>"u")&&(this.options.padding=n),this}border(n,r=!0){return(r||typeof this.options.border>"u")&&(this.options.border=n),this}align(n,r=!0){return(r||typeof this.options.align>"u")&&(this.options.align=n),this}chars(n){return Object.assign(this.options.chars,n),this}getHeader(){return this.headerRow}getBody(){return[...this]}getMaxColWidth(){return this.options.maxColWidth}getMinColWidth(){return this.options.minColWidth}getIndent(){return this.options.indent}getPadding(){return this.options.padding}getBorder(){return this.options.border===!0}hasHeaderBorder(){let n=this.headerRow?.hasBorder();return n===!0||this.getBorder()&&n!==!1}hasBodyBorder(){return this.getBorder()||this.some(n=>n instanceof X?n.hasBorder():n.some(r=>r instanceof z?r.getBorder:!1))}hasBorder(){return this.hasHeaderBorder()||this.hasBodyBorder()}getAlign(){return this.options.align??"left"}},Q=Pt;Q._chars={...ci};var vt=class{constructor(e,n={}){this.cmd=e;this.indent=2;this.options={types:!1,hints:!0,colors:!0,long:!1,...n}}static generate(e,n){return new vt(e,n).generate()}generate(){let e=fn();Mt(this.options.colors);let n=this.generateHeader()+this.generateMeta()+this.generateDescription()+this.generateOptions()+this.generateCommands()+this.generateEnvironmentVariables()+this.generateExamples();return Mt(e),n}generateHeader(){let e=this.cmd.getUsage(),n=[[v("Usage:"),Ht(this.cmd.getPath()+(e?" "+cr(e,this.options.types):""))]];return this.cmd.getVersion()&&n.push([v("Version:"),N(`${this.cmd.getVersion()}`)]),`
`+Q.from(n).indent(this.indent).padding(1).toString()+`
`}generateMeta(){let e=Object.entries(this.cmd.getMeta());if(!e.length)return"";let n=[];for(let[r,i]of e)n.push([v(`${r}: `)+i]);return`
`+Q.from(n).indent(this.indent).padding(1).toString()+`
`}generateDescription(){return this.cmd.getDescription()?this.label("Description")+Q.from([[Bt(this.cmd.getDescription())]]).indent(this.indent*2).maxColWidth(140).padding(1).toString()+`
`:""}generateOptions(){let e=this.cmd.getOptions(!1);if(!e.length)return"";let n=[];if(e.some(s=>s.groupName))for(let s of e){let a=n.find(o=>o.name===s.groupName);a||(a={name:s.groupName,options:[]},n.push(a)),a.options.push(s)}else n=[{name:"Options",options:e}];let i="";for(let s of n)i+=this.generateOptionGroup(s);return i}generateOptionGroup(e){return e.options.length?e.options.find(r=>!!r.typeDefinition)?this.label(e.name??"Options")+Q.from([...e.options.map(r=>[r.flags.map(i=>E(i)).join(", "),cr(r.typeDefinition||"",this.options.types),U(v("-")),Be(r.description,!this.options.long),this.generateHints(r)])]).padding([2,2,1,2]).indent(this.indent*2).maxColWidth([60,60,1,80,60]).toString()+`
`:this.label(e.name??"Options")+Q.from([...e.options.map(r=>[r.flags.map(i=>E(i)).join(", "),U(v("-")),Be(r.description,!this.options.long),this.generateHints(r)])]).indent(this.indent*2).maxColWidth([60,1,80,60]).padding([2,1,2]).toString()+`
`:""}generateCommands(){let e=this.cmd.getCommands(!1);return e.length?e.find(r=>!!r.getArgsDefinition())?this.label("Commands")+Q.from([...e.map(r=>[[r.getName(),...r.getAliases()].map(i=>E(i)).join(", "),cr(r.getArgsDefinition()||"",this.options.types),U(v("-")),r.getShortDescription()])]).indent(this.indent*2).maxColWidth([60,60,1,80]).padding([2,2,1,2]).toString()+`
`:this.label("Commands")+Q.from([...e.map(r=>[[r.getName(),...r.getAliases()].map(i=>E(i)).join(", "),U(v("-")),r.getShortDescription()])]).maxColWidth([60,1,80]).padding([2,1,2]).indent(this.indent*2).toString()+`
`:""}generateEnvironmentVariables(){let e=this.cmd.getEnvVars(!1);return e.length?this.label("Environment variables")+Q.from([...e.map(n=>[n.names.map(r=>E(r)).join(", "),gi(n.details,this.options.types),U(v("-")),this.options.long?Bt(n.description):n.description.trim().split(`
`,1)[0],n.required?`(${N("required")})`:""])]).padding([2,2,1,2]).indent(this.indent*2).maxColWidth([60,60,1,80,10]).toString()+`
`:""}generateExamples(){let e=this.cmd.getExamples();return e.length?this.label("Examples")+Q.from(e.map(n=>[M(v(`${ua(n.name)}:`)),Bt(n.description)])).padding(1).indent(this.indent*2).maxColWidth(150).toString()+`
`:""}generateHints(e){if(!this.options.hints)return"";let n=[];e.required&&n.push(N("required")),typeof e.default<"u"&&n.push(v("Default: ")+mi(e.default,this.options.colors)),e.depends?.length&&n.push(N(v("Depends: "))+ie(e.depends.map(G).join(", "))),e.conflicts?.length&&n.push(U(v("Conflicts: "))+ie(e.conflicts.map(G).join(", ")));let r=this.cmd.getType(e.args[0]?.type)?.handler;if(r instanceof K){let i=r.values?.(this.cmd,this.cmd.getParent());i?.length&&n.push(v("Values: ")+i.map(s=>mi(s,this.options.colors)).join(", "))}return n.length?`(${n.join(", ")})`:""}label(e){return`
`+" ".repeat(this.indent)+v(`${e}:`)+`

`}};function ua(t){return t?.charAt(0).toUpperCase()+t.slice(1)}function mi(t,e){return Deno.inspect(t,{depth:1,colors:e,trailingComma:!1})}function cr(t,e=!0){return t?at(t,!1,!0).map(n=>typeof n=="string"?n:gi(n,e)).join(" "):""}function gi(t,e=!0){let n="";n+=N(t.optionalValue?"[":"<");let r="";return r+=t.name,t.variadic&&(r+="..."),r=Ht(r),n+=r,e&&(n+=N(":"),n+=U(t.type),t.list&&(n+=Ce("[]"))),n+=N(t.optionalValue?"]":">"),n}var Pn=class extends K{parse(e){return On(e)}};var Y=class{constructor(){this.types=new Map;this.rawArgs=[];this.literalArgs=[];this._name="COMMAND";this.desc="";this.options=[];this.commands=new Map;this.examples=[];this.envVars=[];this.aliases=[];this.completions=new Map;this.cmd=this;this.isExecutable=!1;this.throwOnError=!1;this._allowEmpty=!1;this._stopEarly=!1;this._useRawArgs=!1;this.args=[];this.isHidden=!1;this.isGlobal=!1;this.hasDefaults=!1;this._meta={};this._noGlobals=!1}versionOption(e,n,r){return this._versionOptions=e===!1?e:{flags:e,desc:n,opts:typeof r=="function"?{action:r}:r},this}helpOption(e,n,r){return this._helpOptions=e===!1?e:{flags:e,desc:n,opts:typeof r=="function"?{action:r}:r},this}command(e,n,r){this.reset();let i=Cn(e),s=i.flags.shift(),a=i.flags;if(!s)throw new pt;if(this.getBaseCommand(s,!0)){if(!r)throw new ut(s);this.removeCommand(s)}let o,l;return typeof n=="string"&&(o=n),n instanceof Y?l=n.reset():l=new Y,l._name=s,l._parent=this,o&&l.description(o),i.typeDefinition&&l.arguments(i.typeDefinition),a.forEach(p=>l.alias(p)),this.commands.set(s,l),this.select(s),this}alias(e){if(this.cmd._name===e||this.cmd.aliases.includes(e))throw new ct(e);return this.cmd.aliases.push(e),this}reset(){return this._groupName=void 0,this.cmd=this,this}select(e){let n=this.getBaseCommand(e,!0);if(!n)throw new dt(e,this.getBaseCommands(!0));return this.cmd=n,this}name(e){return this.cmd._name=e,this}version(e){return typeof e=="string"?this.cmd.ver=()=>e:typeof e=="function"&&(this.cmd.ver=e),this}meta(e,n){return this.cmd._meta[e]=n,this}getMeta(e){return typeof e>"u"?this._meta:this._meta[e]}help(e){return typeof e=="string"?this.cmd._help=()=>e:typeof e=="function"?this.cmd._help=e:this.cmd._help=(n,r)=>vt.generate(n,{...e,...r}),this}description(e){return this.cmd.desc=e,this}usage(e){return this.cmd._usage=e,this}hidden(){return this.cmd.isHidden=!0,this}global(){return this.cmd.isGlobal=!0,this}executable(){return this.cmd.isExecutable=!0,this}arguments(e){return this.cmd.argsDefinition=e,this}action(e){return this.cmd.fn=e,this}allowEmpty(e){return this.cmd._allowEmpty=e!==!1,this}stopEarly(e=!0){return this.cmd._stopEarly=e,this}useRawArgs(e=!0){return this.cmd._useRawArgs=e,this}default(e){return this.cmd.defaultCommand=e,this}globalType(e,n,r){return this.type(e,n,{...r,global:!0})}type(e,n,r){if(this.cmd.types.get(e)&&!r?.override)throw new mt(e);if(this.cmd.types.set(e,{...r,name:e,handler:n}),n instanceof K&&(typeof n.complete<"u"||typeof n.values<"u")){let i=(s,a)=>n.complete?.(s,a)||[];this.complete(e,i,r)}return this}globalComplete(e,n,r){return this.complete(e,n,{...r,global:!0})}complete(e,n,r){if(this.cmd.completions.has(e)&&!r?.override)throw new gt(e);return this.cmd.completions.set(e,{name:e,complete:n,...r}),this}throwErrors(){return this.cmd.throwOnError=!0,this}error(e){return this.cmd.errorHandler=e,this}getErrorHandler(){return this.errorHandler??this._parent?.errorHandler}noExit(){return this.cmd._shouldExit=!1,this.throwErrors(),this}noGlobals(){return this.cmd._noGlobals=!0,this}shouldThrowErrors(){return this.throwOnError||!!this._parent?.shouldThrowErrors()}shouldExit(){return this._shouldExit??this._parent?.shouldExit()??!0}globalOption(e,n,r){return typeof r=="function"?this.option(e,n,{value:r,global:!0}):this.option(e,n,{...r,global:!0})}group(e){return this.cmd._groupName=e,this}option(e,n,r){if(typeof r=="function")return this.option(e,n,{value:r});let i=Cn(e),s=i.typeDefinition?at(i.typeDefinition):[],a={...r,name:"",description:n,args:s,flags:i.flags,equalsSign:i.equalsSign,typeDefinition:i.typeDefinition,groupName:this._groupName};if(a.separator)for(let o of s)o.list&&(o.separator=a.separator);for(let o of a.flags){let l=o.trim(),p=/^--/.test(l),u=p?l.slice(2):l.slice(1);if(this.cmd.getBaseOption(u,!0))if(r?.override)this.removeOption(u);else throw new lt(u);!a.name&&p?a.name=u:a.aliases?a.aliases.push(u):a.aliases=[u]}return a.prepend?this.cmd.options.unshift(a):this.cmd.options.push(a),this}example(e,n){if(this.cmd.hasExample(e))throw new ft(e);return this.cmd.examples.push({name:e,description:n}),this}globalEnv(e,n,r){return this.env(e,n,{...r,global:!0})}env(e,n,r){let i=Cn(e);if(i.typeDefinition||(i.typeDefinition="<value:boolean>"),i.flags.some(a=>this.cmd.getBaseEnvVar(a,!0)))throw new ht(e);let s=at(i.typeDefinition);if(s.length>1)throw new Tt(e);if(s.length&&s[0].optionalValue)throw new bt(e);if(s.length&&s[0].variadic)throw new xt(e);return this.cmd.envVars.push({name:i.flags[0],names:i.flags,description:n,type:s[0].type,details:s.shift(),...r}),this}parse(e=Deno.args){let n={unknown:e.slice(),flags:{},env:{},literal:[],stopEarly:!1,stopOnUnknown:!1};return this.parseCommand(n)}async parseCommand(e){try{if(this.reset(),this.registerDefaults(),this.rawArgs=e.unknown.slice(),this.isExecutable)return await this.executeExecutable(e.unknown),{options:{},args:[],cmd:this,literal:[]};if(this._useRawArgs)return await this.parseEnvVars(e,this.envVars),this.execute(e.env,...e.unknown);let n=!1,r;if(e.unknown.length>0&&(r=this.getSubCommand(e),!r)){let a=e.unknown[0].replace(/^-+/,"");this.getOption(a,!0)?.global&&(n=!0,await this.parseGlobalOptionsAndEnvVars(e))}if((r||e.unknown.length>0)&&(r??=this.getSubCommand(e),r))return r._globalParent=this,r.parseCommand(e);await this.parseOptionsAndEnvVars(e,n);let i={...e.env,...e.flags},s=this.parseArguments(e,i);return this.literalArgs=e.literal,e.action&&(await e.action.action.call(this,i,...s),e.action.standalone)?{options:i,args:s,cmd:this,literal:this.literalArgs}:await this.execute(i,...s)}catch(n){this.handleError(n)}}getSubCommand(e){let n=this.getCommand(e.unknown[0],!0);return n&&e.unknown.shift(),n}async parseGlobalOptionsAndEnvVars(e){let n=this.getHelpOption()?.flags.includes(e.unknown[0]),r=[...this.envVars.filter(s=>s.global),...this.getGlobalEnvVars(!0)];await this.parseEnvVars(e,r,!n);let i=[...this.options.filter(s=>s.global),...this.getGlobalOptions(!0)];this.parseOptions(e,i,{stopEarly:!0,stopOnUnknown:!0,dotted:!1})}async parseOptionsAndEnvVars(e,n){let r=this.getHelpOption(),i=this._versionOption?.flags.includes(e.unknown[0]),s=r&&e.flags?.[r.name]===!0,a=n?this.envVars.filter(l=>!l.global):this.getEnvVars(!0);await this.parseEnvVars(e,a,!s&&!i);let o=this.getOptions(!0);this.parseOptions(e,o)}registerDefaults(){return this.hasDefaults||this.getParent()?this:(this.hasDefaults=!0,this.reset(),!this.types.has("string")&&this.type("string",new Re,{global:!0}),!this.types.has("number")&&this.type("number",new An,{global:!0}),!this.types.has("integer")&&this.type("integer",new Pn,{global:!0}),!this.types.has("boolean")&&this.type("boolean",new wn,{global:!0}),!this.types.has("file")&&this.type("file",new qe,{global:!0}),this._help||this.help({hints:!0,types:!1}),this._versionOptions!==!1&&(this._versionOptions||this.ver)&&(this.option(this._versionOptions?.flags||"-V, --version",this._versionOptions?.desc||"Show the version number for this program.",{standalone:!0,prepend:!0,action:async function(){this.getRawArgs().includes(`--${this._versionOption?.name}`)?(await this.checkVersion(),this.showLongVersion()):this.showVersion(),this.exit()},...this._versionOptions?.opts??{}}),this._versionOption=this.options[0]),this._helpOptions!==!1&&(this.option(this._helpOptions?.flags||"-h, --help",this._helpOptions?.desc||"Show this help.",{standalone:!0,global:!0,prepend:!0,action:async function(){let e=this.getRawArgs().includes(`--${this.getHelpOption()?.name}`);await this.checkVersion(),this.showHelp({long:e}),this.exit()},...this._helpOptions?.opts??{}}),this._helpOption=this.options[0]),this)}async execute(e,...n){if(this.fn)await this.fn(e,...n);else if(this.defaultCommand){let r=this.getCommand(this.defaultCommand,!0);if(!r)throw new Ct(this.defaultCommand,this.getCommands());return r._globalParent=this,r.execute(e,...n)}return{options:e,args:n,cmd:this,literal:this.literalArgs}}async executeExecutable(e){let n=this.getPath().replace(/\s+/g,"-");await Deno.permissions.request({name:"run",command:n});try{let i=await Deno.run({cmd:[n,...e]}).status();i.success||Deno.exit(i.code)}catch(r){throw r instanceof Deno.errors.NotFound?new Ot(n):r}}parseOptions(e,n,{stopEarly:r=this._stopEarly,stopOnUnknown:i=!1,dotted:s=!0}={}){pr(e,{stopEarly:r,stopOnUnknown:i,dotted:s,allowEmpty:this._allowEmpty,flags:n,ignoreDefaults:e.env,parse:a=>this.parseType(a),option:a=>{!e.action&&a.action&&(e.action=a)}})}parseType(e){let n=this.getType(e.type);if(!n)throw new Ne(e.type,this.getTypes().map(r=>r.name));return n.handler instanceof K?n.handler.parse(e):n.handler(e)}async parseEnvVars(e,n,r=!0){for(let i of n){let s=await this.findEnvVar(i.names);if(s){let a=l=>this.parseType({label:"Environment variable",type:i.type,name:s.name,value:l}),o=ii(i.prefix?i.names[0].replace(new RegExp(`^${i.prefix}`),""):i.names[0]);i.details.list?e.env[o]=s.value.split(i.details.separator??",").map(a):e.env[o]=a(s.value),i.value&&typeof e.env[o]<"u"&&(e.env[o]=i.value(e.env[o]))}else if(i.required&&r)throw new yt(i)}}async findEnvVar(e){for(let n of e)if((await Deno.permissions.query({name:"env",variable:n})).state==="granted"){let i=Deno.env.get(n);if(i)return{name:n,value:i}}}parseArguments(e,n){let r=[],i=e.unknown.slice();if(this.hasArguments())if(i.length){for(let s of this.getArguments()){if(!i.length){if(s.optionalValue)break;throw new Rt(s.name)}let a,o=p=>s.list?p.split(",").map(u=>l(u)):l(p),l=p=>this.parseType({label:"Argument",type:s.type,name:s.name,value:p});s.variadic?a=i.splice(0,i.length).map(p=>o(p)):a=o(i.shift()),s.variadic&&Array.isArray(a)?r.push(...a):typeof a<"u"&&r.push(a)}if(i.length)throw new We(i)}else{let s=this.getArguments().filter(a=>!a.optionalValue).map(a=>a.name);if(s.length&&!!!Object.keys(n).find(l=>this.getOption(l,!0)?.standalone))throw new At(s)}else if(i.length)throw this.hasCommands(!0)?this.hasCommand(i[0],!0)?new We(i):new Ke(i[0],this.getCommands()):new wt(this.getPath());return r}handleError(e){this.throw(e instanceof _?new B(e.message):e instanceof Error?e:new Error(`[non-error-thrown] ${e}`))}throw(e){if(e instanceof B&&(e.cmd=this),this.getErrorHandler()?.(e,this),this.shouldThrowErrors()||!(e instanceof B))throw e;this.showHelp(),console.error(U(`  ${v("error")}: ${e.message}
`)),Deno.exit(e instanceof B?e.exitCode:1)}getName(){return this._name}getParent(){return this._parent}getGlobalParent(){return this._globalParent}getMainCommand(){return this._parent?.getMainCommand()??this}getAliases(){return this.aliases}getPath(){return this._parent?this._parent.getPath()+" "+this._name:this._name}getArgsDefinition(){return this.argsDefinition}getArgument(e){return this.getArguments().find(n=>n.name===e)}getArguments(){return!this.args.length&&this.argsDefinition&&(this.args=at(this.argsDefinition)),this.args}hasArguments(){return!!this.argsDefinition}getVersion(){return this.getVersionHandler()?.call(this,this)}getVersionHandler(){return this.ver??this._parent?.getVersionHandler()}getDescription(){return typeof this.desc=="function"?this.desc=this.desc():this.desc}getUsage(){return this._usage??this.getArgsDefinition()}getShortDescription(){return Be(this.getDescription(),!0)}getRawArgs(){return this.rawArgs}getLiteralArgs(){return this.literalArgs}showVersion(){console.log(this.getVersion())}getLongVersion(){return`${v(this.getMainCommand().getName())} ${E(this.getVersion()??"")}`+Object.entries(this.getMeta()).map(([e,n])=>`
${v(e)} ${E(n)}`).join("")}showLongVersion(){console.log(this.getLongVersion())}showHelp(e){console.log(this.getHelp(e))}getHelp(e){return this.registerDefaults(),this.getHelpHandler().call(this,this,e??{})}getHelpHandler(){return this._help??this._parent?.getHelpHandler()}exit(e=0){this.shouldExit()&&Deno.exit(e)}async checkVersion(){let e=this.getMainCommand(),n=e.getCommand("upgrade");if(!ca(n))return;let r=await n.getLatestVersion(),i=e.getVersion();if(i===r)return;let s=`(New version available: ${r}. Run '${e.getName()} upgrade' to upgrade to the latest version!)`;e.version(`${i}  ${v(N(s))}`)}hasOptions(e){return this.getOptions(e).length>0}getOptions(e){return this.getGlobalOptions(e).concat(this.getBaseOptions(e))}getBaseOptions(e){return this.options.length?e?this.options.slice(0):this.options.filter(n=>!n.hidden):[]}getGlobalOptions(e){let n=this.getHelpOption(),r=(i,s,a=[],o=[])=>{if(i.options.length){for(let l of i.options)if(l.global&&!this.options.find(p=>p.name===l.name)&&o.indexOf(l.name)===-1&&(e||!l.hidden)){if(s&&l!==n)continue;o.push(l.name),a.push(l)}}return i._parent?r(i._parent,s||i._noGlobals,a,o):a};return this._parent?r(this._parent,this._noGlobals):[]}hasOption(e,n){return!!this.getOption(e,n)}getOption(e,n){return this.getBaseOption(e,n)??this.getGlobalOption(e,n)}getBaseOption(e,n){let r=this.options.find(i=>i.name===e||i.aliases?.includes(e));return r&&(n||!r.hidden)?r:void 0}getGlobalOption(e,n){let r=this.getHelpOption(),i=(s,a)=>{let o=s.getBaseOption(e,n);if(!o?.global)return s._parent&&i(s._parent,a||s._noGlobals);if(!(a&&o!==r))return o};return this._parent&&i(this._parent,this._noGlobals)}removeOption(e){let n=this.options.findIndex(r=>r.name===e);if(n!==-1)return this.options.splice(n,1)[0]}hasCommands(e){return this.getCommands(e).length>0}getCommands(e){return this.getGlobalCommands(e).concat(this.getBaseCommands(e))}getBaseCommands(e){let n=Array.from(this.commands.values());return e?n:n.filter(r=>!r.isHidden)}getGlobalCommands(e){let n=(r,i,s=[],a=[])=>{if(r.commands.size){for(let[o,l]of r.commands)if(l.isGlobal&&this!==l&&!this.commands.has(l._name)&&a.indexOf(l._name)===-1&&(e||!l.isHidden)){if(i&&l?.getName()!=="help")continue;a.push(l._name),s.push(l)}}return r._parent?n(r._parent,i||r._noGlobals,s,a):s};return this._parent?n(this._parent,this._noGlobals):[]}hasCommand(e,n){return!!this.getCommand(e,n)}getCommand(e,n){return this.getBaseCommand(e,n)??this.getGlobalCommand(e,n)}getBaseCommand(e,n){for(let r of this.commands.values())if(r._name===e||r.aliases.includes(e))return r&&(n||!r.isHidden)?r:void 0}getGlobalCommand(e,n){let r=(i,s)=>{let a=i.getBaseCommand(e,n);if(!a?.isGlobal)return i._parent&&r(i._parent,s||i._noGlobals);if(!(s&&a.getName()!=="help"))return a};return this._parent&&r(this._parent,this._noGlobals)}removeCommand(e){let n=this.getBaseCommand(e,!0);return n&&this.commands.delete(n._name),n}getTypes(){return this.getGlobalTypes().concat(this.getBaseTypes())}getBaseTypes(){return Array.from(this.types.values())}getGlobalTypes(){let e=(n,r=[],i=[])=>n?(n.types.size&&n.types.forEach(s=>{s.global&&!this.types.has(s.name)&&i.indexOf(s.name)===-1&&(i.push(s.name),r.push(s))}),e(n._parent,r,i)):r;return e(this._parent)}getType(e){return this.getBaseType(e)??this.getGlobalType(e)}getBaseType(e){return this.types.get(e)}getGlobalType(e){if(!this._parent)return;let n=this._parent.getBaseType(e);return n?.global?n:this._parent.getGlobalType(e)}getCompletions(){return this.getGlobalCompletions().concat(this.getBaseCompletions())}getBaseCompletions(){return Array.from(this.completions.values())}getGlobalCompletions(){let e=(n,r=[],i=[])=>n?(n.completions.size&&n.completions.forEach(s=>{s.global&&!this.completions.has(s.name)&&i.indexOf(s.name)===-1&&(i.push(s.name),r.push(s))}),e(n._parent,r,i)):r;return e(this._parent)}getCompletion(e){return this.getBaseCompletion(e)??this.getGlobalCompletion(e)}getBaseCompletion(e){return this.completions.get(e)}getGlobalCompletion(e){if(!this._parent)return;let n=this._parent.getBaseCompletion(e);return n?.global?n:this._parent.getGlobalCompletion(e)}hasEnvVars(e){return this.getEnvVars(e).length>0}getEnvVars(e){return this.getGlobalEnvVars(e).concat(this.getBaseEnvVars(e))}getBaseEnvVars(e){return this.envVars.length?e?this.envVars.slice(0):this.envVars.filter(n=>!n.hidden):[]}getGlobalEnvVars(e){if(this._noGlobals)return[];let n=(r,i=[],s=[])=>r?(r.envVars.length&&r.envVars.forEach(a=>{a.global&&!this.envVars.find(o=>o.names[0]===a.names[0])&&s.indexOf(a.names[0])===-1&&(e||!a.hidden)&&(s.push(a.names[0]),i.push(a))}),n(r._parent,i,s)):i;return n(this._parent)}hasEnvVar(e,n){return!!this.getEnvVar(e,n)}getEnvVar(e,n){return this.getBaseEnvVar(e,n)??this.getGlobalEnvVar(e,n)}getBaseEnvVar(e,n){let r=this.envVars.find(i=>i.names.indexOf(e)!==-1);return r&&(n||!r.hidden)?r:void 0}getGlobalEnvVar(e,n){if(!this._parent||this._noGlobals)return;let r=this._parent.getBaseEnvVar(e,n);return r?.global?r:this._parent.getGlobalEnvVar(e,n)}hasExamples(){return this.examples.length>0}getExamples(){return this.examples}hasExample(e){return!!this.getExample(e)}getExample(e){return this.examples.find(n=>n.name===e)}getHelpOption(){return this._helpOption??this._parent?.getHelpOption()}};function ca(t){return t instanceof Y&&"getLatestVersion"in t}var dr={"[P":"f1","[Q":"f2","[R":"f3","[S":"f4",OP:"f1",OQ:"f2",OR:"f3",OS:"f4","[11~":"f1","[12~":"f2","[13~":"f3","[14~":"f4","[[A":"f1","[[B":"f2","[[C":"f3","[[D":"f4","[[E":"f5","[15~":"f5","[17~":"f6","[18~":"f7","[19~":"f8","[20~":"f9","[21~":"f10","[23~":"f11","[24~":"f12","[A":"up","[B":"down","[C":"right","[D":"left","[E":"clear","[F":"end","[H":"home",OA:"up",OB:"down",OC:"right",OD:"left",OE:"clear",OF:"end",OH:"home","[1~":"home","[2~":"insert","[3~":"delete","[4~":"end","[5~":"pageup","[6~":"pagedown","[[5~":"pageup","[[6~":"pagedown","[7~":"home","[8~":"end"},mr={"[a":"up","[b":"down","[c":"right","[d":"left","[e":"clear","[2$":"insert","[3$":"delete","[5$":"pageup","[6$":"pagedown","[7$":"home","[8$":"end","[Z":"tab"},gr={Oa:"up",Ob:"down",Oc:"right",Od:"left",Oe:"clear","[2^":"insert","[3^":"delete","[5^":"pageup","[6^":"pagedown","[7^":"home","[8^":"end"},fr={"\r":"return","\n":"enter","	":"tab","\b":"backspace","\x7F":"backspace","\x1B":"escape"," ":"space"};var da=65536,hi="\x1B";function yi(t){let e=-1,n=[],r=t instanceof Uint8Array?new TextDecoder().decode(t):t,i=()=>r.length-1>=e+1,s=()=>r[++e];return a(),n;function a(){let o=s(),l=o,p=!1,u={name:void 0,char:void 0,sequence:void 0,code:void 0,ctrl:!1,meta:!1,shift:!1};if(o===hi&&i()&&(p=!0,l+=o=s(),o===hi&&(l+=o=s())),p&&(o==="O"||o==="[")){let c=o,d=0;if(o==="O")l+=o=s(),o>="0"&&o<="9"&&(d=(Number(o)>>0)-1,l+=o=s()),c+=o;else if(o==="["){l+=o=s(),o==="["&&(c+=o,l+=o=s());let f=l.length-1;o>="0"&&o<="9"&&(l+=o=s(),o>="0"&&o<="9"&&(l+=o=s())),o===";"&&(l+=o=s(),o>="0"&&o<="9"&&(l+=s()));let m=l.slice(f),g;(g=m.match(/^(\d\d?)(;(\d))?([~^$])$/))?(c+=g[1]+g[4],d=(Number(g[3])||1)-1):(g=m.match(/^((\d;)?(\d))?([A-Za-z])$/))?(c+=g[4],d=(Number(g[3])||1)-1):c+=m}u.ctrl=!!(d&4),u.meta=!!(d&10),u.shift=!!(d&1),u.code=c,c in dr?u.name=dr[c]:c in mr?(u.name=mr[c],u.shift=!0):c in gr?(u.name=gr[c],u.ctrl=!0):u.name="undefined"}else o in fr?(u.name=fr[o],u.meta=p,u.name==="space"&&(u.char=o)):!p&&o<=""?(u.name=String.fromCharCode(o.charCodeAt(0)+"a".charCodeAt(0)-1),u.ctrl=!0,u.char=u.name):/^[0-9A-Za-z]$/.test(o)?(u.name=o.toLowerCase(),u.shift=/^[A-Z]$/.test(o),u.meta=p,u.char=o):p?(u.name=o.length?void 0:"escape",u.meta=!0):(u.name=o,u.char=o);if(u.sequence=l,l.length!==0&&(u.name!==void 0||p)||ma(l,0)===l.length)n.push(u);else throw new Error("Unrecognized or broken escape sequence");i()&&a()}}function ma(t,e){let n=t.codePointAt(e);return typeof n>"u"?1:n>=da?2:1}var Ti={ARROW_UP:"\u2191",ARROW_DOWN:"\u2193",ARROW_LEFT:"\u2190",ARROW_RIGHT:"\u2192",ARROW_UP_LEFT:"\u2196",ARROW_UP_RIGHT:"\u2197",ARROW_DOWN_RIGHT:"\u2198",ARROW_DOWN_LEFT:"\u2199",RADIO_ON:"\u25C9",RADIO_OFF:"\u25EF",TICK:"\u2714",CROSS:"\u2718",ELLIPSIS:"\u2026",POINTER_SMALL:"\u203A",LINE:"\u2500",POINTER:"\u276F",INFO:"\u2139",TAB_LEFT:"\u21E4",TAB_RIGHT:"\u21E5",ESCAPE:"\u238B",BACKSPACE:"\u232B",PAGE_UP:"\u21DE",PAGE_DOWN:"\u21DF",ENTER:"\u21B5",SEARCH:"\u2315"},ga={...Ti,RADIO_ON:"(*)",RADIO_OFF:"( )",TICK:"\u221A",CROSS:"\xD7",POINTER_SMALL:"\xBB"},ne=Deno.build.os==="windows"?ga:Ti;var bi=(()=>{let{Deno:t}=globalThis;if(typeof t?.build?.os=="string")return t.build.os;let{navigator:e}=globalThis;return e?.appVersion?.includes?.("Win")?"windows":"linux"})(),zt=bi==="windows";var Yt={};Ze(Yt,{basename:()=>va,delimiter:()=>Oa,dirname:()=>Pa,extname:()=>Sa,format:()=>$a,fromFileUrl:()=>Va,isAbsolute:()=>Oi,join:()=>wa,normalize:()=>Ci,parse:()=>Ea,relative:()=>Aa,resolve:()=>En,sep:()=>Ca,toFileUrl:()=>ka,toNamespacedPath:()=>Ra});function D(t){if(typeof t!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function vn(t){return t===47}function w(t){return vn(t)||t===92}function Pe(t){return t>=97&&t<=122||t>=65&&t<=90}function St(t,e,n,r){let i="",s=0,a=-1,o=0,l;for(let p=0,u=t.length;p<=u;++p){if(p<u)l=t.charCodeAt(p);else{if(r(l))break;l=47}if(r(l)){if(!(a===p-1||o===1))if(a!==p-1&&o===2){if(i.length<2||s!==2||i.charCodeAt(i.length-1)!==46||i.charCodeAt(i.length-2)!==46){if(i.length>2){let c=i.lastIndexOf(n);c===-1?(i="",s=0):(i=i.slice(0,c),s=i.length-1-i.lastIndexOf(n)),a=p,o=0;continue}else if(i.length===2||i.length===1){i="",s=0,a=p,o=0;continue}}e&&(i.length>0?i+=`${n}..`:i="..",s=2)}else i.length>0?i+=n+t.slice(a+1,p):i=t.slice(a+1,p),s=p-a-1;a=p,o=0}else l===46&&o!==-1?++o:o=-1}return i}function Sn(t,e){let n=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||"");return n?n===e.root?n+r:n+t+r:r}var ba={"	":"%09","\n":"%0A","\v":"%0B","\f":"%0C","\r":"%0D"," ":"%20"};function $n(t){return t.replaceAll(/[\s]/g,e=>ba[e]??e)}var hr=class extends Error{constructor(e){super(e),this.name="DenoStdInternalError"}};function xi(t,e=""){if(!t)throw new hr(e)}var Ca="\\",Oa=";";function En(...t){let e="",n="",r=!1;for(let i=t.length-1;i>=-1;i--){let s,{Deno:a}=globalThis;if(i>=0)s=t[i];else if(e){if(typeof a?.env?.get!="function"||typeof a?.cwd!="function")throw new TypeError("Resolved a relative path without a CWD.");s=a.cwd(),(s===void 0||s.slice(0,3).toLowerCase()!==`${e.toLowerCase()}\\`)&&(s=`${e}\\`)}else{if(typeof a?.cwd!="function")throw new TypeError("Resolved a drive-letter-less path without a CWD.");s=a.cwd()}D(s);let o=s.length;if(o===0)continue;let l=0,p="",u=!1,c=s.charCodeAt(0);if(o>1)if(w(c))if(u=!0,w(s.charCodeAt(1))){let d=2,f=d;for(;d<o&&!w(s.charCodeAt(d));++d);if(d<o&&d!==f){let m=s.slice(f,d);for(f=d;d<o&&w(s.charCodeAt(d));++d);if(d<o&&d!==f){for(f=d;d<o&&!w(s.charCodeAt(d));++d);d===o?(p=`\\\\${m}\\${s.slice(f)}`,l=d):d!==f&&(p=`\\\\${m}\\${s.slice(f,d)}`,l=d)}}}else l=1;else Pe(c)&&s.charCodeAt(1)===58&&(p=s.slice(0,2),l=2,o>2&&w(s.charCodeAt(2))&&(u=!0,l=3));else w(c)&&(l=1,u=!0);if(!(p.length>0&&e.length>0&&p.toLowerCase()!==e.toLowerCase())&&(e.length===0&&p.length>0&&(e=p),r||(n=`${s.slice(l)}\\${n}`,r=u),r&&e.length>0))break}return n=St(n,!r,"\\",w),e+(r?"\\":"")+n||"."}function Ci(t){D(t);let e=t.length;if(e===0)return".";let n=0,r,i=!1,s=t.charCodeAt(0);if(e>1)if(w(s))if(i=!0,w(t.charCodeAt(1))){let o=2,l=o;for(;o<e&&!w(t.charCodeAt(o));++o);if(o<e&&o!==l){let p=t.slice(l,o);for(l=o;o<e&&w(t.charCodeAt(o));++o);if(o<e&&o!==l){for(l=o;o<e&&!w(t.charCodeAt(o));++o);if(o===e)return`\\\\${p}\\${t.slice(l)}\\`;o!==l&&(r=`\\\\${p}\\${t.slice(l,o)}`,n=o)}}}else n=1;else Pe(s)&&t.charCodeAt(1)===58&&(r=t.slice(0,2),n=2,e>2&&w(t.charCodeAt(2))&&(i=!0,n=3));else if(w(s))return"\\";let a;return n<e?a=St(t.slice(n),!i,"\\",w):a="",a.length===0&&!i&&(a="."),a.length>0&&w(t.charCodeAt(e-1))&&(a+="\\"),r===void 0?i?a.length>0?`\\${a}`:"\\":a.length>0?a:"":i?a.length>0?`${r}\\${a}`:`${r}\\`:a.length>0?r+a:r}function Oi(t){D(t);let e=t.length;if(e===0)return!1;let n=t.charCodeAt(0);return w(n)?!0:!!(Pe(n)&&e>2&&t.charCodeAt(1)===58&&w(t.charCodeAt(2)))}function wa(...t){let e=t.length;if(e===0)return".";let n,r=null;for(let a=0;a<e;++a){let o=t[a];D(o),o.length>0&&(n===void 0?n=r=o:n+=`\\${o}`)}if(n===void 0)return".";let i=!0,s=0;if(xi(r!=null),w(r.charCodeAt(0))){++s;let a=r.length;a>1&&w(r.charCodeAt(1))&&(++s,a>2&&(w(r.charCodeAt(2))?++s:i=!1))}if(i){for(;s<n.length&&w(n.charCodeAt(s));++s);s>=2&&(n=`\\${n.slice(s)}`)}return Ci(n)}function Aa(t,e){if(D(t),D(e),t===e)return"";let n=En(t),r=En(e);if(n===r||(t=n.toLowerCase(),e=r.toLowerCase(),t===e))return"";let i=0,s=t.length;for(;i<s&&t.charCodeAt(i)===92;++i);for(;s-1>i&&t.charCodeAt(s-1)===92;--s);let a=s-i,o=0,l=e.length;for(;o<l&&e.charCodeAt(o)===92;++o);for(;l-1>o&&e.charCodeAt(l-1)===92;--l);let p=l-o,u=a<p?a:p,c=-1,d=0;for(;d<=u;++d){if(d===u){if(p>u){if(e.charCodeAt(o+d)===92)return r.slice(o+d+1);if(d===2)return r.slice(o+d)}a>u&&(t.charCodeAt(i+d)===92?c=d:d===2&&(c=3));break}let m=t.charCodeAt(i+d),g=e.charCodeAt(o+d);if(m!==g)break;m===92&&(c=d)}if(d!==u&&c===-1)return r;let f="";for(c===-1&&(c=0),d=i+c+1;d<=s;++d)(d===s||t.charCodeAt(d)===92)&&(f.length===0?f+="..":f+="\\..");return f.length>0?f+r.slice(o+c,l):(o+=c,r.charCodeAt(o)===92&&++o,r.slice(o,l))}function Ra(t){if(typeof t!="string")return t;if(t.length===0)return"";let e=En(t);if(e.length>=3){if(e.charCodeAt(0)===92){if(e.charCodeAt(1)===92){let n=e.charCodeAt(2);if(n!==63&&n!==46)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(Pe(e.charCodeAt(0))&&e.charCodeAt(1)===58&&e.charCodeAt(2)===92)return`\\\\?\\${e}`}return t}function Pa(t){D(t);let e=t.length;if(e===0)return".";let n=-1,r=-1,i=!0,s=0,a=t.charCodeAt(0);if(e>1)if(w(a)){if(n=s=1,w(t.charCodeAt(1))){let o=2,l=o;for(;o<e&&!w(t.charCodeAt(o));++o);if(o<e&&o!==l){for(l=o;o<e&&w(t.charCodeAt(o));++o);if(o<e&&o!==l){for(l=o;o<e&&!w(t.charCodeAt(o));++o);if(o===e)return t;o!==l&&(n=s=o+1)}}}}else Pe(a)&&t.charCodeAt(1)===58&&(n=s=2,e>2&&w(t.charCodeAt(2))&&(n=s=3));else if(w(a))return t;for(let o=e-1;o>=s;--o)if(w(t.charCodeAt(o))){if(!i){r=o;break}}else i=!1;if(r===-1){if(n===-1)return".";r=n}return t.slice(0,r)}function va(t,e=""){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');D(t);let n=0,r=-1,i=!0,s;if(t.length>=2){let a=t.charCodeAt(0);Pe(a)&&t.charCodeAt(1)===58&&(n=2)}if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let a=e.length-1,o=-1;for(s=t.length-1;s>=n;--s){let l=t.charCodeAt(s);if(w(l)){if(!i){n=s+1;break}}else o===-1&&(i=!1,o=s+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(r=s):(a=-1,r=o))}return n===r?r=o:r===-1&&(r=t.length),t.slice(n,r)}else{for(s=t.length-1;s>=n;--s)if(w(t.charCodeAt(s))){if(!i){n=s+1;break}}else r===-1&&(i=!1,r=s+1);return r===-1?"":t.slice(n,r)}}function Sa(t){D(t);let e=0,n=-1,r=0,i=-1,s=!0,a=0;t.length>=2&&t.charCodeAt(1)===58&&Pe(t.charCodeAt(0))&&(e=r=2);for(let o=t.length-1;o>=e;--o){let l=t.charCodeAt(o);if(w(l)){if(!s){r=o+1;break}continue}i===-1&&(s=!1,i=o+1),l===46?n===-1?n=o:a!==1&&(a=1):n!==-1&&(a=-1)}return n===-1||i===-1||a===0||a===1&&n===i-1&&n===r+1?"":t.slice(n,i)}function $a(t){if(t===null||typeof t!="object")throw new TypeError(`The "pathObject" argument must be of type Object. Received type ${typeof t}`);return Sn("\\",t)}function Ea(t){D(t);let e={root:"",dir:"",base:"",ext:"",name:""},n=t.length;if(n===0)return e;let r=0,i=t.charCodeAt(0);if(n>1){if(w(i)){if(r=1,w(t.charCodeAt(1))){let c=2,d=c;for(;c<n&&!w(t.charCodeAt(c));++c);if(c<n&&c!==d){for(d=c;c<n&&w(t.charCodeAt(c));++c);if(c<n&&c!==d){for(d=c;c<n&&!w(t.charCodeAt(c));++c);c===n?r=c:c!==d&&(r=c+1)}}}}else if(Pe(i)&&t.charCodeAt(1)===58)if(r=2,n>2){if(w(t.charCodeAt(2))){if(n===3)return e.root=e.dir=t,e;r=3}}else return e.root=e.dir=t,e}else if(w(i))return e.root=e.dir=t,e;r>0&&(e.root=t.slice(0,r));let s=-1,a=r,o=-1,l=!0,p=t.length-1,u=0;for(;p>=r;--p){if(i=t.charCodeAt(p),w(i)){if(!l){a=p+1;break}continue}o===-1&&(l=!1,o=p+1),i===46?s===-1?s=p:u!==1&&(u=1):s!==-1&&(u=-1)}return s===-1||o===-1||u===0||u===1&&s===o-1&&s===a+1?o!==-1&&(e.base=e.name=t.slice(a,o)):(e.name=t.slice(a,s),e.base=t.slice(a,o),e.ext=t.slice(s,o)),a>0&&a!==r?e.dir=t.slice(0,a-1):e.dir=e.root,e}function Va(t){if(t=t instanceof URL?t:new URL(t),t.protocol!="file:")throw new TypeError("Must be a file URL.");let e=decodeURIComponent(t.pathname.replace(/\//g,"\\").replace(/%(?![0-9A-Fa-f]{2})/g,"%25")).replace(/^\\*([A-Za-z]:)(\\|$)/,"$1\\");return t.hostname!=""&&(e=`\\\\${t.hostname}${e}`),e}function ka(t){if(!Oi(t))throw new TypeError("Must be an absolute path.");let[,e,n]=t.match(/^(?:[/\\]{2}([^/\\]+)(?=[/\\](?:[^/\\]|$)))?(.*)/),r=new URL("file:///");if(r.pathname=$n(n.replace(/%/g,"%25")),e!=null&&e!="localhost"&&(r.hostname=e,!r.hostname))throw new TypeError("Invalid hostname.");return r}var Zt={};Ze(Zt,{basename:()=>Fa,delimiter:()=>Ga,dirname:()=>Ia,extname:()=>Ma,format:()=>Ha,fromFileUrl:()=>Ua,isAbsolute:()=>Ai,join:()=>Da,normalize:()=>wi,parse:()=>ja,relative:()=>La,resolve:()=>yr,sep:()=>Na,toFileUrl:()=>Ba,toNamespacedPath:()=>_a});var Na="/",Ga=":";function yr(...t){let e="",n=!1;for(let r=t.length-1;r>=-1&&!n;r--){let i;if(r>=0)i=t[r];else{let{Deno:s}=globalThis;if(typeof s?.cwd!="function")throw new TypeError("Resolved a relative path without a CWD.");i=s.cwd()}D(i),i.length!==0&&(e=`${i}/${e}`,n=i.charCodeAt(0)===47)}return e=St(e,!n,"/",vn),n?e.length>0?`/${e}`:"/":e.length>0?e:"."}function wi(t){if(D(t),t.length===0)return".";let e=t.charCodeAt(0)===47,n=t.charCodeAt(t.length-1)===47;return t=St(t,!e,"/",vn),t.length===0&&!e&&(t="."),t.length>0&&n&&(t+="/"),e?`/${t}`:t}function Ai(t){return D(t),t.length>0&&t.charCodeAt(0)===47}function Da(...t){if(t.length===0)return".";let e;for(let n=0,r=t.length;n<r;++n){let i=t[n];D(i),i.length>0&&(e?e+=`/${i}`:e=i)}return e?wi(e):"."}function La(t,e){if(D(t),D(e),t===e||(t=yr(t),e=yr(e),t===e))return"";let n=1,r=t.length;for(;n<r&&t.charCodeAt(n)===47;++n);let i=r-n,s=1,a=e.length;for(;s<a&&e.charCodeAt(s)===47;++s);let o=a-s,l=i<o?i:o,p=-1,u=0;for(;u<=l;++u){if(u===l){if(o>l){if(e.charCodeAt(s+u)===47)return e.slice(s+u+1);if(u===0)return e.slice(s+u)}else i>l&&(t.charCodeAt(n+u)===47?p=u:u===0&&(p=0));break}let d=t.charCodeAt(n+u),f=e.charCodeAt(s+u);if(d!==f)break;d===47&&(p=u)}let c="";for(u=n+p+1;u<=r;++u)(u===r||t.charCodeAt(u)===47)&&(c.length===0?c+="..":c+="/..");return c.length>0?c+e.slice(s+p):(s+=p,e.charCodeAt(s)===47&&++s,e.slice(s))}function _a(t){return t}function Ia(t){if(D(t),t.length===0)return".";let e=t.charCodeAt(0)===47,n=-1,r=!0;for(let i=t.length-1;i>=1;--i)if(t.charCodeAt(i)===47){if(!r){n=i;break}}else r=!1;return n===-1?e?"/":".":e&&n===1?"//":t.slice(0,n)}function Fa(t,e=""){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');D(t);let n=0,r=-1,i=!0,s;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let a=e.length-1,o=-1;for(s=t.length-1;s>=0;--s){let l=t.charCodeAt(s);if(l===47){if(!i){n=s+1;break}}else o===-1&&(i=!1,o=s+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(r=s):(a=-1,r=o))}return n===r?r=o:r===-1&&(r=t.length),t.slice(n,r)}else{for(s=t.length-1;s>=0;--s)if(t.charCodeAt(s)===47){if(!i){n=s+1;break}}else r===-1&&(i=!1,r=s+1);return r===-1?"":t.slice(n,r)}}function Ma(t){D(t);let e=-1,n=0,r=-1,i=!0,s=0;for(let a=t.length-1;a>=0;--a){let o=t.charCodeAt(a);if(o===47){if(!i){n=a+1;break}continue}r===-1&&(i=!1,r=a+1),o===46?e===-1?e=a:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||r===-1||s===0||s===1&&e===r-1&&e===n+1?"":t.slice(e,r)}function Ha(t){if(t===null||typeof t!="object")throw new TypeError(`The "pathObject" argument must be of type Object. Received type ${typeof t}`);return Sn("/",t)}function ja(t){D(t);let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let n=t.charCodeAt(0)===47,r;n?(e.root="/",r=1):r=0;let i=-1,s=0,a=-1,o=!0,l=t.length-1,p=0;for(;l>=r;--l){let u=t.charCodeAt(l);if(u===47){if(!o){s=l+1;break}continue}a===-1&&(o=!1,a=l+1),u===46?i===-1?i=l:p!==1&&(p=1):i!==-1&&(p=-1)}return i===-1||a===-1||p===0||p===1&&i===a-1&&i===s+1?a!==-1&&(s===0&&n?e.base=e.name=t.slice(1,a):e.base=e.name=t.slice(s,a)):(s===0&&n?(e.name=t.slice(1,i),e.base=t.slice(1,a)):(e.name=t.slice(s,i),e.base=t.slice(s,a)),e.ext=t.slice(i,a)),s>0?e.dir=t.slice(0,s-1):n&&(e.dir="/"),e}function Ua(t){if(t=t instanceof URL?t:new URL(t),t.protocol!="file:")throw new TypeError("Must be a file URL.");return decodeURIComponent(t.pathname.replace(/%(?![0-9A-Fa-f]{2})/g,"%25"))}function Ba(t){if(!Ai(t))throw new TypeError("Must be an absolute path.");let e=new URL("file:///");return e.pathname=$n(t.replace(/%/g,"%25").replace(/\\/g,"%5C")),e}var Wa=zt?Yt:Zt,{join:Vg,normalize:kg}=Wa;var qa=zt?Yt:Zt;var{basename:Dg,delimiter:Lg,dirname:Pi,extname:_g,format:Ig,fromFileUrl:Fg,isAbsolute:Mg,join:vi,normalize:Vn,parse:Hg,relative:jg,resolve:Ug,sep:Bg,toFileUrl:Kg,toNamespacedPath:Wg}=qa;var he,se,Jt,kn,Xt,Nn,Gn,Dn,Qt,Ye=class{constructor(e){this.tty=lr;this.cursor={x:0,y:0};ue(this,he,void 0);ue(this,se,void 0);ue(this,Jt,!0);ue(this,kn,new TextEncoder);ue(this,Xt,async()=>{if(typeof Ye.injectedValue<"u"&&j(this,se))throw new Error(this.error());if(await this.render(),ce(this,se,void 0),!await this.read())return j(this,Xt).call(this);if(typeof j(this,he)>"u")throw new Error("internal error: failed to read value");this.clear();let e=this.success(j(this,he));return e&&console.log(e),Ye.injectedValue=void 0,this.tty.cursorShow(),j(this,he)});ue(this,Nn,async()=>{let e=await j(this,Gn).call(this);return e.length?yi(e):[]});ue(this,Gn,async()=>{let e=new Uint8Array(8),n=Deno.isatty(Deno.stdin.rid);n&&Deno.stdin.setRaw(!0,{cbreak:this.settings.cbreak===!0});let r=await Deno.stdin.read(e);return n&&Deno.stdin.setRaw(!1),r===null?e:e.subarray(0,r)});ue(this,Dn,e=>this.settings.transform?this.settings.transform(e):this.transform(e));ue(this,Qt,async e=>{if(!e&&typeof this.settings.default<"u"){ce(this,he,this.settings.default);return}ce(this,he,void 0),ce(this,se,void 0);let n=await(this.settings.validate?this.settings.validate(e):this.validate(e));n===!1?ce(this,se,"Invalid answer."):typeof n=="string"?ce(this,se,n):ce(this,he,j(this,Dn).call(this,e))});this.settings={...e,keys:{submit:["enter","return"],...e.keys??{}}},this.indent=this.settings.indent??" "}static inject(e){Ye.injectedValue=e}async prompt(){try{return await j(this,Xt).call(this)}finally{this.tty.cursorShow()}}clear(){this.tty.cursorLeft.eraseDown()}async render(){let n=(await Promise.all([this.message(),this.body?.(),this.footer()])).filter(Boolean).join(`
`),r=n.split(`
`),i=za(),a=(i?r.reduce((o,l)=>{let p=ge(l).length;return o+(p>i?Math.ceil(p/i):1)},0):n.split(`
`).length)-this.cursor.y-1;(!j(this,Jt)||j(this,se))&&this.clear(),ce(this,Jt,!1),Deno.build.os==="windows"?(console.log(n),this.tty.cursorUp()):Deno.stdout.writeSync(j(this,kn).encode(n)),a&&this.tty.cursorUp(a),this.tty.cursorTo(this.cursor.x)}async read(){if(typeof Ye.injectedValue<"u"){let e=Ye.injectedValue;await j(this,Qt).call(this,e)}else{let e=await j(this,Nn).call(this);if(!e.length)return!1;for(let n of e)await this.handleEvent(n)}return typeof j(this,he)<"u"}submit(){return j(this,Qt).call(this,this.getValue())}message(){return`${this.settings.indent}${this.settings.prefix}`+v(this.settings.message)+this.defaults()}defaults(){let e="";return typeof this.settings.default<"u"&&!this.settings.hideDefault&&(e+=M(` (${this.format(this.settings.default)})`)),e}success(e){return`${this.settings.indent}${this.settings.prefix}`+v(this.settings.message)+this.defaults()+" "+this.settings.pointer+" "+Ce(this.format(e))}footer(){return this.error()??this.hint()}error(){return j(this,se)?this.settings.indent+U(v(`${ne.CROSS} `)+j(this,se)):void 0}hint(){return this.settings.hint?this.settings.indent+ie(E(M(`${ne.POINTER} `)+this.settings.hint)):void 0}setErrorMessage(e){ce(this,se,e)}async handleEvent(e){switch(!0){case(e.name==="c"&&e.ctrl):this.clear(),this.tty.cursorShow(),Deno.exit(130);return;case this.isKey(this.settings.keys,"submit",e):await this.submit();break}}isKey(e,n,r){let i=e?.[n];return typeof i<"u"&&(typeof r.name<"u"&&i.indexOf(r.name)!==-1||typeof r.sequence<"u"&&i.indexOf(r.sequence)!==-1)}},oe=Ye;he=new WeakMap,se=new WeakMap,Jt=new WeakMap,kn=new WeakMap,Xt=new WeakMap,Nn=new WeakMap,Gn=new WeakMap,Dn=new WeakMap,Qt=new WeakMap;function za(){try{return Deno.consoleSize(Deno.stdout.rid).columns}catch{return null}}var Mf=Deno.build.os==="windows"?"\\":"/";var Te=[],C=[],F=0,_n=F++;C[_n]="0|[1-9]\\d*";var Vi=F++;C[Vi]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var ki=F++,br=C[_n];C[ki]=`(${br})\\.(${br})\\.(${br})`;var Cr=F++;C[Cr]="(?:"+C[_n]+"|"+C[Vi]+")";var Ar=F++;C[Ar]="(?:-("+C[Cr]+"(?:\\."+C[Cr]+")*))";var Or=F++;C[Or]="[0-9A-Za-z-]+";var Rr=F++;C[Rr]="(?:\\+("+C[Or]+"(?:\\."+C[Or]+")*))";var Pr=F++,Ni="v?"+C[ki]+C[Ar]+"?"+C[Rr]+"?";C[Pr]="^"+Ni+"$";var vr=F++;C[vr]="((?:<|>)?=?)";var Ln=F++;C[Ln]=C[_n]+"|x|X|\\*";var Et=F++;C[Et]="[v=\\s]*("+C[Ln]+")(?:\\.("+C[Ln]+")(?:\\.("+C[Ln]+")(?:"+C[Ar]+")?"+C[Rr]+"?)?)?";var Gi=F++;C[Gi]="^"+C[vr]+"\\s*"+C[Et]+"$";var Di=F++;C[Di]="(?:~>?)";var Li=F++;C[Li]="^"+C[Di]+C[Et]+"$";var _i=F++;C[_i]="(?:\\^)";var Ii=F++;C[Ii]="^"+C[_i]+C[Et]+"$";var Fi=F++;C[Fi]="^"+C[vr]+"\\s*("+Ni+")$|^$";var Mi=F++;C[Mi]="^\\s*("+C[Et]+")\\s+-\\s+("+C[Et]+")\\s*$";var Hi=F++;C[Hi]="(<|>)?=?\\s*\\*";for(let t=0;t<F;t++)Te[t]||(Te[t]=new RegExp(C[t]));function kt(t,e){if(typeof e!="object"&&(e={includePrerelease:!1}),t instanceof k)return t;if(typeof t!="string"||t.length>256||!Te[Pr].test(t))return null;try{return new k(t,e)}catch{return null}}var k=class{constructor(e,n){if(typeof n!="object"&&(n={includePrerelease:!1}),e instanceof k)e=e.version;else if(typeof e!="string")throw new TypeError("Invalid Version: "+e);if(e.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof k))return new k(e,n);this.options=n;let r=e.trim().match(Te[Pr]);if(!r)throw new TypeError("Invalid Version: "+e);if(this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Number.MAX_SAFE_INTEGER||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Number.MAX_SAFE_INTEGER||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Number.MAX_SAFE_INTEGER||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<Number.MAX_SAFE_INTEGER)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format(),this.raw=this.version}format(e={}){let{style:n}=e,r=this.version=this.major+"."+this.minor+"."+this.patch;switch(this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),n){case"build":return[r,this.build.join(".")].filter(i=>i).join("+");case"full":return[this.version,this.build.join(".")].filter(i=>i).join("+");case"release":return r;case"prerelease":return this.version;default:return this.version}}compare(e){return e instanceof k||(e=new k(e,this.options)),this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof k||(e=new k(e,this.options)),en(this.major,e.major)||en(this.minor,e.minor)||en(this.patch,e.patch)}comparePre(e){if(e instanceof k||(e=new k(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let n=0;do{let r=this.prerelease[n],i=e.prerelease[n];if(r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return en(r,i)}while(++n);return 1}compareBuild(e){e instanceof k||(e=new k(e,this.options));let n=0;do{let r=this.build[n],i=e.build[n];if(r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return en(r,i)}while(++n);return 1}increment(e,n,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.increment("pre",n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.increment("pre",n);break;case"prepatch":this.prerelease.length=0,this.increment("patch",n),this.increment("pre",n);break;case"prerelease":this.prerelease.length===0&&this.increment("patch",n),this.increment("pre",n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);i===-1&&this.prerelease.push(0)}n&&(this.prerelease[0]===n?isNaN(this.prerelease[1])&&(this.prerelease=[n,0]):this.prerelease=[n,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.build=r===void 0?this.build:r.split("."),this.format(),this.raw=this.version,this}toString(){return this.version}};var $i=/^[0-9]+$/;function en(t,e){let n=$i.test(t),r=$i.test(e);if(t===null||e===null)throw"Comparison against null invalid";return n&&r&&(t=+t,e=+e),t===e?0:n&&!r?-1:r&&!n?1:t<e?-1:1}function Sr(t,e){return new k(t,e).major}function ji(t,e){return new k(t,e).minor}function Nt(t,e,n){return new k(t,n).compare(new k(e,n))}function Vt(t,e,n){return Nt(t,e,n)>0}function wr(t,e,n){return Nt(t,e,n)<0}function Xa(t,e,n){return Nt(t,e,n)===0}function Qa(t,e,n){return Nt(t,e,n)!==0}function Ui(t,e,n){return Nt(t,e,n)>=0}function Bi(t,e,n){return Nt(t,e,n)<=0}function xr(t,e,n,r){switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t===n;case"!==":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t!==n;case"":case"=":case"==":return Xa(t,n,r);case"!=":return Qa(t,n,r);case">":return Vt(t,n,r);case">=":return Ui(t,n,r);case"<":return wr(t,n,r);case"<=":return Bi(t,n,r);default:throw new TypeError("Invalid operator: "+e)}}var $t={},ye=class{constructor(e,n){if(typeof n!="object"&&(n={includePrerelease:!1}),e instanceof ye)return e;if(!(this instanceof ye))return new ye(e,n);this.options=n,this.parse(e),this.semver===$t?this.value="":this.value=this.operator+this.semver.version}parse(e){let n=Te[Fi],r=e.match(n);if(!r)throw new TypeError("Invalid comparator: "+e);let i=r[1];this.operator=i!==void 0?i:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new k(r[2],this.options):this.semver=$t}test(e){return this.semver===$t||e===$t?!0:(typeof e=="string"&&(e=new k(e,this.options)),xr(e,this.operator,this.semver,this.options))}intersects(e,n){if(!(e instanceof ye))throw new TypeError("a Comparator is required");typeof n!="object"&&(n={includePrerelease:!1});let r;if(this.operator==="")return this.value===""?!0:(r=new re(e.value,n),tn(this.value,r,n));if(e.operator==="")return e.value===""?!0:(r=new re(this.value,n),tn(e.semver,r,n));let i=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),s=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),a=this.semver.version===e.semver.version,o=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),l=xr(this.semver,"<",e.semver,n)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),p=xr(this.semver,">",e.semver,n)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return i||s||a&&o||l||p}toString(){return this.value}},re=class{constructor(e,n){if(typeof n!="object"&&(n={includePrerelease:!1}),e instanceof re)return e.includePrerelease===!!n.includePrerelease?e:new re(e.raw,n);if(e instanceof ye)return new re(e.value,n);if(!(this instanceof re))return new re(e,n);if(this.options=n,this.includePrerelease=!!n.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}parseRange(e){e=e.trim();let n=Te[Mi];return e=e.replace(n,pl),e=e.split(/\s+/).join(" "),e.split(" ").map(i=>tl(i,this.options)).join(" ").split(/\s+/).map(i=>new ye(i,this.options))}test(e){typeof e=="string"&&(e=new k(e,this.options));for(let n=0;n<this.set.length;n++)if(el(this.set[n],e,this.options))return!0;return!1}intersects(e,n){if(!(e instanceof re))throw new TypeError("a Range is required");return this.set.some(r=>Ei(r,n)&&e.set.some(i=>Ei(i,n)&&r.every(s=>i.every(a=>s.intersects(a,n)))))}toString(){return this.range}};function el(t,e,n){for(let r=0;r<t.length;r++)if(!t[r].test(e))return!1;if(e.prerelease.length&&!n.includePrerelease){for(let r=0;r<t.length;r++)if(t[r].semver!==$t&&t[r].semver.prerelease.length>0){let i=t[r].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}function Ei(t,e){let n=!0,r=t.slice(),i=r.pop();for(;n&&r.length;)n=r.every(s=>i?.intersects(s,e)),i=r.pop();return n}function tl(t,e){return t=il(t,e),t=nl(t,e),t=ol(t,e),t=ll(t,e),t}function Z(t){return!t||t.toLowerCase()==="x"||t==="*"}function nl(t,e){return t.trim().split(/\s+/).map(n=>rl(n,e)).join(" ")}function rl(t,e){let n=Te[Li];return t.replace(n,(r,i,s,a,o)=>{let l;return Z(i)?l="":Z(s)?l=">="+i+".0.0 <"+(+i+1)+".0.0":Z(a)?l=">="+i+"."+s+".0 <"+i+"."+(+s+1)+".0":o?l=">="+i+"."+s+"."+a+"-"+o+" <"+i+"."+(+s+1)+".0":l=">="+i+"."+s+"."+a+" <"+i+"."+(+s+1)+".0",l})}function il(t,e){return t.trim().split(/\s+/).map(n=>sl(n,e)).join(" ")}function sl(t,e){let n=Te[Ii];return t.replace(n,(r,i,s,a,o)=>{let l;return Z(i)?l="":Z(s)?l=">="+i+".0.0 <"+(+i+1)+".0.0":Z(a)?i==="0"?l=">="+i+"."+s+".0 <"+i+"."+(+s+1)+".0":l=">="+i+"."+s+".0 <"+(+i+1)+".0.0":o?i==="0"?s==="0"?l=">="+i+"."+s+"."+a+"-"+o+" <"+i+"."+s+"."+(+a+1):l=">="+i+"."+s+"."+a+"-"+o+" <"+i+"."+(+s+1)+".0":l=">="+i+"."+s+"."+a+"-"+o+" <"+(+i+1)+".0.0":i==="0"?s==="0"?l=">="+i+"."+s+"."+a+" <"+i+"."+s+"."+(+a+1):l=">="+i+"."+s+"."+a+" <"+i+"."+(+s+1)+".0":l=">="+i+"."+s+"."+a+" <"+(+i+1)+".0.0",l})}function ol(t,e){return t.split(/\s+/).map(n=>al(n,e)).join(" ")}function al(t,e){t=t.trim();let n=Te[Gi];return t.replace(n,(r,i,s,a,o,l)=>{let p=Z(s),u=p||Z(a),c=u||Z(o),d=c;return i==="="&&d&&(i=""),p?i===">"||i==="<"?r="<0.0.0":r="*":i&&d?(u&&(a=0),o=0,i===">"?(i=">=",u?(s=+s+1,a=0,o=0):(a=+a+1,o=0)):i==="<="&&(i="<",u?s=+s+1:a=+a+1),r=i+s+"."+a+"."+o):u?r=">="+s+".0.0 <"+(+s+1)+".0.0":c&&(r=">="+s+"."+a+".0 <"+s+"."+(+a+1)+".0"),r})}function ll(t,e){return t.trim().replace(Te[Hi],"")}function pl(t,e,n,r,i,s,a,o,l,p,u,c,d){return Z(n)?e="":Z(r)?e=">="+n+".0.0":Z(i)?e=">="+n+"."+r+".0":e=">="+e,Z(l)?o="":Z(p)?o="<"+(+l+1)+".0.0":Z(u)?o="<"+l+"."+(+p+1)+".0":c?o="<="+l+"."+p+"."+u+"-"+c:o="<="+o,(e+" "+o).trim()}function tn(t,e,n){try{e=new re(e,n)}catch{return!1}return e.test(t)}function Ki(t,e,n){return ul(t,e,">",n)}function ul(t,e,n,r){t=new k(t,r),e=new re(e,r);let i,s,a,o,l;switch(n){case">":i=Vt,s=Bi,a=wr,o=">",l=">=";break;case"<":i=wr,s=Ui,a=Vt,o="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(tn(t,e,r))return!1;for(let p=0;p<e.set.length;++p){let u=e.set[p],c=null,d=null;for(let f of u)f.semver===$t&&(f=new ye(">=0.0.0")),c=c||f,d=d||f,i(f.semver,c.semver,r)?c=f:a(f.semver,d.semver,r)&&(d=f);if(c===null||d===null)return!0;if(c.operator===o||c.operator===l||(!d.operator||d.operator===o)&&s(t,d.semver))return!1;if(d.operator===l&&a(t,d.semver))return!1}return!0}var cl={denoLand:"deno_land",npmPackage:"npm_package",rawGitHub:"raw_github",unknown:"unknown"},ae=cl;var dl=async function(t){let e=`https://registry.npmjs.org/${t}`,n=await fetch(e);if(!n.ok)return null;let r=JSON.parse(await n.text());return Object.keys(r.versions).map(s=>kt(s)).filter(s=>s!==null)},ml=async function(t){let e=`https://apiland.deno.dev/v2/modules/${t}`,n=await fetch(e);return n.ok?JSON.parse(await n.text()).versions.map(s=>kt(s)).filter(s=>s!==null):null},gl=async function(t,e){let n={Accept:"application/vnd.github+json","X-GitHub-Api-Version":"2022-11-28"};typeof e=="string"&&Object.defineProperty(n,"Authorization",{value:`Bearer ${e}`});let r=await fetch(`https://api.github.com/repos/${t}/releases`,{headers:n});return r.ok?JSON.parse(await r.text()).map(a=>kt(a.tag_name)).filter(a=>a!==null):null},fl={[ae.npmPackage]:dl,[ae.denoLand]:ml,[ae.rawGitHub]:gl};var $r=fl;var qi=new Map,hl=async function(t,e,...n){let r=t+":"+e,i=qi.get(r);if(typeof i<"u")return i;let s=await $r[t](e,...n);return qi.set(r,s),s},zi=t=>t.reduce((e,n)=>Vt(n,e)?n:e),yl=async function(t,e){let n=t.version??"",r=kt(n)!==null;if(!(t.type in $r))return null;let i=t.type,s=[];i==="raw_github"&&typeof e?.gitHubToken=="string"&&s.push(e.gitHubToken);let a=await hl(i,t.name,...s);if(a===null)return{fixed:r,outdated:"not_found",latest:null};e.usePrerelease||(a=a.filter(d=>d.prerelease.length===0));let o=a.filter(d=>tn(d,n,{includePrerelease:e.usePrerelease}));if(o.length<1)return{fixed:r,outdated:"not_found",latest:null};let l=zi(o),p=a.filter(d=>Ki(d,n,{includePrerelease:e.usePrerelease})).filter(d=>{switch(e.level){case"major":return!0;case"minor":return Sr(l)===d.major;case"patch":return Sr(l)===d.major&&ji(l)===d.minor}}),u="none",c=null;return p.length>0&&(c=zi(p),c.major>l.major?u="major":c.minor>l.minor?u="minor":c.patch>l.patch?u="patch":e.usePrerelease&&Vt(c,l,{includePrerelease:!0})&&(u="pre_release")),{fixed:r,outdated:u,latest:c?.version??null}},Yi=yl;var Er=function(t){let e=t.lastIndexOf("@");return e<=0?[t,""]:[t.slice(0,e),t.slice(e+1)]};var In={test:/^https?:\/\/deno.land/,parse:t=>{let e=new URL(t).pathname.split("/").slice(1),n=e[0]==="x"?e[1]:e[0],[r,i]=Er(n);return{type:ae.denoLand,name:r,version:i}}},Fn={test:/^https?:\/\/raw.githubusercontent.com/,parse:t=>{let e=new URL(t).pathname.split("/").slice(1),n=`${e[0]}/${e[1]}`,r=e[2];return{type:ae.rawGitHub,name:n,version:r}}},Mn={test:/^npm:/,parse:t=>{let[e,n]=Er(t.slice(4));return{type:ae.npmPackage,name:e,version:n}}},Zi=function(t,e){for(let n of e)if(n.test.test(t))return n.parse(t);return null};var Ji=function(t){let e=JSON.parse(t),n=[];for(let r in e.dependencies)n.push({type:ae.npmPackage,name:r,version:e.dependencies[r]});for(let r in e.devDependencies)n.push({type:ae.npmPackage,name:r,version:e.devDependencies[r]});return n},Xi=function(t,e){return Zi(t,e)??{type:ae.unknown,name:t,version:null}},Qi=function(t,e){let n=JSON.parse(t);return[...Object.values(n?.imports??{}),...Object.values(n?.scope??{}).flatMap(i=>Object.values(i))].map(i=>Xi(i,e))},Vr=function(t,e){return[/"https?:\/\/[\w/:%#\$&\?\(\)~\.=\+\-@]+"/g,/'https?:\/\/[\w/:%#\$&\?\(\)~\.=\+\-@]+'/g,/`https?:\/\/[\w/:%#\$&\?\(\)~\.=\+\-@]+`/g,/"npm:[\w/:%#\$&\?\(\)~\.=\+\-@]+"/g,/'npm:[\w/:%#\$&\?\(\)~\.=\+\-@]+'/g,/`npm:[\w/:%#\$&\?\(\)~\.=\+\-@]+`/g].flatMap(i=>[...t.matchAll(i)]).map(i=>i[0].slice(1,-1)).map(i=>Xi(i,e))};var Hn=new Map,kr=t=>{let e=Hn.get(t);return typeof e=="boolean"?e:Qn(Fe(t,"deno.json"),{isFile:!0})||Qn(Fe(t,"deno.jsonc"),{isFile:!0})?(Hn.set(t,!0),!0):(Hn.set(t,!1),!1)},xl={file:"package.json",resolver:t=>Ji(t)},Cl={file:"import_map.json",enabled:kr,resolver:t=>Qi(t,[In,Fn,Mn])},Ol={file:"deps.ts",enabled:kr,resolver:t=>Vr(t,[In,Fn,Mn])},wl={file:"**/deps.js",enabled:kr,resolver:t=>Vr(t,[In,Fn,Mn])},Nr=[xl,Cl,Ol,wl];var Al=async function*(t,e){for(let n of e)for await(let r of Wr($e(t,n)))r.isFile&&(yield[r.path,n])},Rl=async function(){let t=new Y().name("deps-scanner-js").description("Dependency scanner for Node.js and Deno project").option("-l, --level [level:string]","version update limit",{default:"major"}).option("--prerelease","use prerelease").arguments("[path]"),{options:e,args:n}=await t.parse(Deno.args),r=typeof e.level=="string"?e.level.toLowerCase():e.level;r!=="major"&&r!=="minor"&&r!=="patch"&&(console.error(`${r} is not a valid level.`),Deno.exit(1));let i=r,s=e.prerelease===!0,a=Deno.cwd(),o=[];for(let m of Nr)(m.enabled===void 0||m.enabled(a))&&o.push(m.file);let l=new Map;for await(let[m,g]of Al(a,o)){console.log(`Scanning ${m}...`);let T=await Deno.readTextFile(m);for(let S of Nr)S.file===g&&S.resolver(T).forEach(P=>{l.set(`${P.type}-${P.name}`,P)})}let p=[...l.values()],u=[];for(let m of p){let g=await Yi(m,{level:i,usePrerelease:s});g===null?console.log(`\u2754${m.name} cannot be resolved (${m.type})`):g.outdated==="not_found"?console.log(`\u2754 ${m.name} not found on remote (${m.type})`):g.outdated==="none"?g.fixed?console.log(`\u2705 ${m.name} is up to date`):console.log(`\u26A0\uFE0F ${m.name} may up to date (version not fixed)`):g.fixed?console.log(`\u274C ${m.name} is outdated (${g.outdated})`):console.log(`\u274C ${m.name} is outdated (${g.outdated}) and version is not fixed`),g!==null&&u.push([m,g])}let c=u.filter(([,m])=>m.outdated!=="none"&&m.outdated!=="not_found"),d=u.filter(([m,g])=>g.outdated==="not_found"),f=u.filter(([m,g])=>!g.fixed);if(console.log(),console.log(`\x1B[1m${c.length}\x1B[0m module${c.length>1?"s are":" is"} outdated.`),d.length>0&&(console.log("Could not find following modules:"),console.log("  "+d.map(([m])=>m.name).join(", "))),f.length>0&&(console.log("Version not fixed at following modules:"),console.log("  "+f.map(([m])=>m.name).join(", "))),c.length>0){let m=[["","package","current","latest"]],g={major:"\x1B[31mMajor\x1B[0m",minor:"\x1B[33mMinor\x1B[0m",patch:"\x1B[34mPatch\x1B[0m",pre_release:"\x1B[36mPre\x1B[0m",none:"Latest",not_found:"Not Found"};for(let[S,P]of c)m.push([`${g[P.outdated]}`,S.name,S.version??"(null)",P.latest??"(null)"]);let T=new Array(m[0].length).fill(0).map((S,P)=>m.reduce((h,R)=>R[P].length>h?R[P].length:h,0));m=m.map(S=>S.map((P,h)=>`${P}${" ".repeat(T[h])}`.slice(0,T[h]))),T[0]=5,m[0][0]="     ",console.log(m[0].join(" ")),console.log(T.map(S=>"-".repeat(S)).join(" ")),console.log(m.slice(1).map(S=>S.join(" ")).join(`
`))}};Rl();})();
